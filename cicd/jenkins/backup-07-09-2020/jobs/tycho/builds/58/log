Started by user [8mha:////4K9RYymFaggB3y3D+hH+VqHqTrglxLVLwFvh6ZMVAda9AAAAmh+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAz+EgY+/dLi1CL9pNS8vNSSkmQANcXSfcMAAAA=[0mCharles Bennett
Running as SYSTEM
[EnvInject] - Loading node environment variables.
Building on master in workspace /var/lib/jenkins/jobs/tycho/workspace
[WS-CLEANUP] Deleting project workspace...
[WS-CLEANUP] Deferred wipeout is used...
[WS-CLEANUP] Done
No credentials specified
Cloning the remote Git repository
Cloning repository https://github.com/helxplatform/tycho
 > git init /var/lib/jenkins/jobs/tycho/workspace # timeout=10
Fetching upstream changes from https://github.com/helxplatform/tycho
 > git --version # timeout=10
 > git fetch --tags --progress https://github.com/helxplatform/tycho +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git config remote.origin.url https://github.com/helxplatform/tycho # timeout=10
 > git config --add remote.origin.fetch +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git config remote.origin.url https://github.com/helxplatform/tycho # timeout=10
Fetching upstream changes from https://github.com/helxplatform/tycho
 > git fetch --tags --progress https://github.com/helxplatform/tycho +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/metadata^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/refs/heads/metadata^{commit} # timeout=10
Checking out Revision 9f4b9d3946dca40d6111de58cfdbcbd962a5de1d (refs/remotes/origin/metadata)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f 9f4b9d3946dca40d6111de58cfdbcbd962a5de1d # timeout=10
Commit message: "Merge branch 'metadata' of https://github.com/helxplatform/tycho into metadata"
 > git rev-list --no-walk 9f4b9d3946dca40d6111de58cfdbcbd962a5de1d # timeout=10
No emails were triggered.
[workspace] $ /bin/bash -xe /tmp/jenkins5196494225272019931.sh
+ set -ex
+ echo 'Branch: '
Branch: 
+ echo 'Git commit: 9f4b9d3946dca40d6111de58cfdbcbd962a5de1d'
Git commit: 9f4b9d3946dca40d6111de58cfdbcbd962a5de1d
+ echo 'Change ID: '
Change ID: 
+ echo 'Change author: '
Change author: 
+ echo 'Change author display name: '
Change author display name: 
+ echo 'Change author email: '
Change author email: 
+ echo 'Build number: 58'
Build number: 58
+ echo 'Build ID: 58'
Build ID: 58
+ echo 'Job name: tycho'
Job name: tycho
+ echo 'Build tag: jenkins-tycho-58'
Build tag: jenkins-tycho-58
+ echo 'Node name: master'
Node name: master
+ echo 'Node labels: master'
Node labels: master
+ echo 'Workspace: /var/lib/jenkins/jobs/tycho/workspace'
Workspace: /var/lib/jenkins/jobs/tycho/workspace
+ echo 'Jenkins URL: https://stars-app.renci.org/jenkins/'
Jenkins URL: https://stars-app.renci.org/jenkins/
+ WS=/var/lib/jenkins/jobs/tycho/workspace
+ GITDIR=tycho
+ TYCHO_DIR=tycho
+ CLONE_HOME=/var/lib/jenkins/jobs/tycho/workspace/tycho
+ TYCHO_HOME=/var/lib/jenkins/jobs/tycho/workspace/tycho/tycho
+ DOCKER_DIR=docker/tycho-api
+ COMP_DIR=/var/lib/jenkins/jobs/tycho/workspace/tycho/docker/tycho-api
+ JT_DIR=/var/lib/jenkins/jobs/tycho
+ VERSION_FILE=/var/lib/jenkins/jobs/tycho/version/metadata/ver
+ BUILD_BRANCH=metadata
+ TYCHO_URL=https://github.com/helxplatform/tycho.git
+ rm -rf /var/lib/jenkins/jobs/tycho/workspace/tycho
+ git clone https://github.com/helxplatform/tycho.git
Cloning into 'tycho'...
+ cd tycho
+ git checkout metadata
Switched to a new branch 'metadata'
Branch metadata set up to track remote branch metadata from origin.
+ cd /var/lib/jenkins/jobs/tycho/workspace/tycho
+ sudo -u evryscope cat
+ sudo -u evryscope cat
+ /usr/local/bin/kubectl apply -f /var/lib/jenkins/jobs/tycho/workspace/tycho/cluster_role_binding.yaml
clusterrolebinding.rbac.authorization.k8s.io/tycho-access-admin unchanged
+ sudo -u evryscope chmod 544 /var/lib/jenkins/jobs/tycho/workspace/tycho/start_tycho_api.sh
+ /usr/bin/python3 -m venv venv
+ source venv/bin/activate
++ deactivate nondestructive
++ '[' -n '' ']'
++ '[' -n '' ']'
++ '[' -n /bin/bash -o -n '' ']'
++ hash -r
++ '[' -n '' ']'
++ unset VIRTUAL_ENV
++ '[' '!' nondestructive = nondestructive ']'
++ VIRTUAL_ENV=/var/lib/jenkins/jobs/tycho/workspace/tycho/venv
++ export VIRTUAL_ENV
++ _OLD_VIRTUAL_PATH=/sbin:/usr/sbin:/bin:/usr/bin
++ PATH=/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/bin:/sbin:/usr/sbin:/bin:/usr/bin
++ export PATH
++ '[' -n '' ']'
++ '[' -z '' ']'
++ _OLD_VIRTUAL_PS1=
++ '[' 'x(venv) ' '!=' x ']'
++ PS1='(venv) '
++ export PS1
++ '[' -n /bin/bash -o -n '' ']'
++ hash -r
+ pwd
/var/lib/jenkins/jobs/tycho/workspace/tycho
+ ls -l
total 32
drwxr-xr-x 3 evryscope service accounts   96 Jun 15 11:42 bin
-rw-r--r-- 1 evryscope service accounts  273 Jun 15 11:42 cluster_role_binding.yaml
drwxr-xr-x 5 evryscope service accounts  107 Jun 15 11:42 docker
drwxr-xr-x 5 evryscope service accounts   92 Jun 15 11:42 docs
drwxr-xr-x 2 evryscope service accounts 4096 Jun 15 11:42 kubernetes
-rw-r--r-- 1 evryscope service accounts 9636 Jun 15 11:42 README.md
-rw-r--r-- 1 evryscope service accounts  853 Jun 15 11:42 requirements.txt
-r-xr--r-- 1 evryscope service accounts   26 Jun 15 11:42 start_tycho_api.sh
drwxr-xr-x 6 evryscope service accounts 4096 Jun 15 11:42 tycho
drwxr-xr-x 5 evryscope service accounts   69 Jun 15 11:42 venv
+ whoami
evryscope
+ echo /home/evryscope
/home/evryscope
+ export MINIKUBE_WANTUPDATENOTIFICATION=false
+ MINIKUBE_WANTUPDATENOTIFICATION=false
+ export MINIKUBE_WANTREPORTERRORPROMPT=false
+ MINIKUBE_WANTREPORTERRORPROMPT=false
+ export MINIKUBE_HOME=/home/evryscope
+ MINIKUBE_HOME=/home/evryscope
+ export CHANGE_MINIKUBE_NONE_USER=true
+ CHANGE_MINIKUBE_NONE_USER=true
+ export KUBECONFIG=/home/evryscope/.kube/config
+ KUBECONFIG=/home/evryscope/.kube/config
+ pip install -r requirements.txt --upgrade pip
Collecting pip
  Using cached https://files.pythonhosted.org/packages/43/84/23ed6a1796480a6f1a2d38f2802901d078266bda38388954d01d3f2e821d/pip-20.1.1-py2.py3-none-any.whl
Collecting adal==1.2.1 (from -r requirements.txt (line 1))
  Using cached https://files.pythonhosted.org/packages/00/72/53dce9e4f5d6c1aa57b8d408cb34dff1969ecbf10ab7e678f32c5e0e2397/adal-1.2.1-py2.py3-none-any.whl
Collecting aniso8601==4.1.0 (from -r requirements.txt (line 2))
  Using cached https://files.pythonhosted.org/packages/8c/1d/6fdba7c6e28a53fea0cb13171829fb1812c400eb0d4d9d1de25ec5d81f0f/aniso8601-4.1.0-py2.py3-none-any.whl
Collecting asn1crypto==0.24.0 (from -r requirements.txt (line 3))
  Using cached https://files.pythonhosted.org/packages/ea/cd/35485615f45f30a510576f1a56d1e0a7ad7bd8ab5ed7cdc600ef7cd06222/asn1crypto-0.24.0-py2.py3-none-any.whl
Collecting atomicwrites==1.3.0 (from -r requirements.txt (line 4))
  Using cached https://files.pythonhosted.org/packages/52/90/6155aa926f43f2b2a22b01be7241be3bfd1ceaf7d0b3267213e8127d41f4/atomicwrites-1.3.0-py2.py3-none-any.whl
Collecting attrs==18.2.0 (from -r requirements.txt (line 5))
  Using cached https://files.pythonhosted.org/packages/3a/e1/5f9023cc983f1a628a8c2fd051ad19e76ff7b142a0faf329336f9a62a514/attrs-18.2.0-py2.py3-none-any.whl
Collecting cachetools==3.1.0 (from -r requirements.txt (line 6))
  Using cached https://files.pythonhosted.org/packages/39/2b/d87fc2369242bd743883232c463f28205902b8579cb68dcf5b11eee1652f/cachetools-3.1.0-py2.py3-none-any.whl
Collecting certifi==2018.11.29 (from -r requirements.txt (line 7))
  Using cached https://files.pythonhosted.org/packages/9f/e0/accfc1b56b57e9750eba272e24c4dddeac86852c2bebd1236674d7887e8a/certifi-2018.11.29-py2.py3-none-any.whl
Collecting cffi==1.12.1 (from -r requirements.txt (line 8))
  Using cached https://files.pythonhosted.org/packages/fc/32/bf446f299e5ae3315e1cc3ec2f4ae668a5424a5e1d29b78562016eecc951/cffi-1.12.1-cp37-cp37m-manylinux1_x86_64.whl
Collecting chardet==3.0.4 (from -r requirements.txt (line 9))
  Using cached https://files.pythonhosted.org/packages/bc/a9/01ffebfb562e4274b6487b4bb1ddec7ca55ec7510b22e4c51f14098443b8/chardet-3.0.4-py2.py3-none-any.whl
Collecting Click==7.0 (from -r requirements.txt (line 10))
  Using cached https://files.pythonhosted.org/packages/fa/37/45185cb5abbc30d7257104c434fe0b07e5a195a6847506c074527aa599ec/Click-7.0-py2.py3-none-any.whl
Collecting cryptography==2.5 (from -r requirements.txt (line 11))
  Using cached https://files.pythonhosted.org/packages/98/71/e632e222f34632e0527dd41799f7847305e701f38f512d81bdf96009bca4/cryptography-2.5-cp34-abi3-manylinux1_x86_64.whl
Collecting flasgger==0.9.2 (from -r requirements.txt (line 12))
  Using cached https://files.pythonhosted.org/packages/a2/0e/c5f1d52e36c2afaf1fc23fce125df6ac39430e84c96a8205f3603b166a5b/flasgger-0.9.2-py2.py3-none-any.whl
Collecting Flask==1.0.2 (from -r requirements.txt (line 13))
  Using cached https://files.pythonhosted.org/packages/7f/e7/08578774ed4536d3242b14dacb4696386634607af824ea997202cd0edb4b/Flask-1.0.2-py2.py3-none-any.whl
Collecting Flask-Cors==3.0.7 (from -r requirements.txt (line 14))
  Using cached https://files.pythonhosted.org/packages/65/cb/683f71ff8daa3aea0a5cbb276074de39f9ab66d3fbb8ad5efb5bb83e90d2/Flask_Cors-3.0.7-py2.py3-none-any.whl
Collecting Flask-RESTful==0.3.7 (from -r requirements.txt (line 15))
  Using cached https://files.pythonhosted.org/packages/17/44/6e490150ee443ca81d5f88b61bb4bbb133d44d75b0b716ebe92489508da4/Flask_RESTful-0.3.7-py2.py3-none-any.whl
Collecting google-auth==1.6.3 (from -r requirements.txt (line 16))
  Using cached https://files.pythonhosted.org/packages/c5/9b/ed0516cc1f7609fb0217e3057ff4f0f9f3e3ce79a369c6af4a6c5ca25664/google_auth-1.6.3-py2.py3-none-any.whl
Collecting idna==2.8 (from -r requirements.txt (line 17))
  Using cached https://files.pythonhosted.org/packages/14/2c/cd551d81dbe15200be1cf41cd03869a46fe7226e7450af7a6545bfc474c9/idna-2.8-py2.py3-none-any.whl
Collecting itsdangerous==1.1.0 (from -r requirements.txt (line 18))
  Using cached https://files.pythonhosted.org/packages/76/ae/44b03b253d6fade317f32c24d100b3b35c2239807046a4c953c7b89fa49e/itsdangerous-1.1.0-py2.py3-none-any.whl
Collecting Jinja2==2.10 (from -r requirements.txt (line 19))
  Using cached https://files.pythonhosted.org/packages/7f/ff/ae64bacdfc95f27a016a7bed8e8686763ba4d277a78ca76f32659220a731/Jinja2-2.10-py2.py3-none-any.whl
Collecting jsonschema==3.0.0 (from -r requirements.txt (line 20))
  Using cached https://files.pythonhosted.org/packages/cd/e6/be1b2a6ebebdaf1f790f1e750bb720fbda0335c2a19601ea9d8bb5059f38/jsonschema-3.0.0-py2.py3-none-any.whl
Collecting kubernetes==8.0.1 (from -r requirements.txt (line 21))
  Using cached https://files.pythonhosted.org/packages/40/eb/4d6a80db84ac24c867c94fbf16e6f26db9780f5232f46ddd2e5539b42205/kubernetes-8.0.1-py2.py3-none-any.whl
Collecting MarkupSafe==1.1.1 (from -r requirements.txt (line 22))
  Using cached https://files.pythonhosted.org/packages/98/7b/ff284bd8c80654e471b769062a9b43cc5d03e7a615048d96f4619df8d420/MarkupSafe-1.1.1-cp37-cp37m-manylinux1_x86_64.whl
Collecting mistune==0.8.4 (from -r requirements.txt (line 23))
  Using cached https://files.pythonhosted.org/packages/09/ec/4b43dae793655b7d8a25f76119624350b4d65eb663459eb9603d7f1f0345/mistune-0.8.4-py2.py3-none-any.whl
Collecting more-itertools==6.0.0 (from -r requirements.txt (line 24))
  Using cached https://files.pythonhosted.org/packages/ae/d4/d6bad4844831943dd667510947712750004525c5807711982f4ec390da2b/more_itertools-6.0.0-py3-none-any.whl
Collecting oauthlib==3.0.1 (from -r requirements.txt (line 25))
  Using cached https://files.pythonhosted.org/packages/16/95/699466b05b72b94a41f662dc9edf87fda4289e3602ecd42d27fcaddf7b56/oauthlib-3.0.1-py2.py3-none-any.whl
Collecting pluggy==0.9.0 (from -r requirements.txt (line 26))
  Using cached https://files.pythonhosted.org/packages/84/e8/4ddac125b5a0e84ea6ffc93cfccf1e7ee1924e88f53c64e98227f0af2a5f/pluggy-0.9.0-py2.py3-none-any.whl
Collecting py==1.8.0 (from -r requirements.txt (line 27))
  Using cached https://files.pythonhosted.org/packages/76/bc/394ad449851729244a97857ee14d7cba61ddb268dce3db538ba2f2ba1f0f/py-1.8.0-py2.py3-none-any.whl
Collecting pyasn1==0.4.5 (from -r requirements.txt (line 28))
  Using cached https://files.pythonhosted.org/packages/7b/7c/c9386b82a25115cccf1903441bba3cbadcfae7b678a20167347fa8ded34c/pyasn1-0.4.5-py2.py3-none-any.whl
Collecting pyasn1-modules==0.2.4 (from -r requirements.txt (line 29))
  Using cached https://files.pythonhosted.org/packages/da/98/8ddd9fa4d84065926832bcf2255a2b69f1d03330aa4d1c49cc7317ac888e/pyasn1_modules-0.2.4-py2.py3-none-any.whl
Collecting pycparser==2.19 (from -r requirements.txt (line 30))
Collecting PyJWT==1.7.1 (from -r requirements.txt (line 31))
  Using cached https://files.pythonhosted.org/packages/87/8b/6a9f14b5f781697e51259d81657e6048fd31a113229cf346880bb7545565/PyJWT-1.7.1-py2.py3-none-any.whl
Collecting pyrsistent==0.14.11 (from -r requirements.txt (line 32))
  Using cached https://files.pythonhosted.org/packages/8c/46/4e93ab8a379d7efe93f20a0fb8a27bdfe88942cc954ab0210c3164e783e0/pyrsistent-0.14.11.tar.gz
Collecting pytest==4.3.0 (from -r requirements.txt (line 33))
  Using cached https://files.pythonhosted.org/packages/51/b2/2fa8e8b179c792c457c2f7800f1313bfbd34f515e3a833e6083121844c14/pytest-4.3.0-py2.py3-none-any.whl
Collecting python-dateutil==2.8.0 (from -r requirements.txt (line 34))
  Using cached https://files.pythonhosted.org/packages/41/17/c62faccbfbd163c7f57f3844689e3a78bae1f403648a6afb1d0866d87fbb/python_dateutil-2.8.0-py2.py3-none-any.whl
Collecting pytz==2018.9 (from -r requirements.txt (line 35))
  Using cached https://files.pythonhosted.org/packages/61/28/1d3920e4d1d50b19bc5d24398a7cd85cc7b9a75a490570d5a30c57622d34/pytz-2018.9-py2.py3-none-any.whl
Collecting PyYAML==3.13 (from -r requirements.txt (line 36))
  Using cached https://files.pythonhosted.org/packages/9e/a3/1d13970c3f36777c583f136c136f804d70f500168edc1edea6daa7200769/PyYAML-3.13.tar.gz
Collecting requests==2.21.0 (from -r requirements.txt (line 37))
  Using cached https://files.pythonhosted.org/packages/7d/e3/20f3d364d6c8e5d2353c72a67778eb189176f08e873c9900e10c0287b84b/requests-2.21.0-py2.py3-none-any.whl
Collecting requests-oauthlib==1.2.0 (from -r requirements.txt (line 38))
  Using cached https://files.pythonhosted.org/packages/c2/e2/9fd03d55ffb70fe51f587f20bcf407a6927eb121de86928b34d162f0b1ac/requests_oauthlib-1.2.0-py2.py3-none-any.whl
Collecting rsa==4.0 (from -r requirements.txt (line 39))
  Using cached https://files.pythonhosted.org/packages/02/e5/38518af393f7c214357079ce67a317307936896e961e35450b70fad2a9cf/rsa-4.0-py2.py3-none-any.whl
Collecting six==1.12.0 (from -r requirements.txt (line 40))
  Using cached https://files.pythonhosted.org/packages/73/fb/00a976f728d0d1fecfe898238ce23f502a721c0ac0ecfedb80e0d88c64e9/six-1.12.0-py2.py3-none-any.whl
Collecting urllib3==1.24.1 (from -r requirements.txt (line 41))
  Using cached https://files.pythonhosted.org/packages/62/00/ee1d7de624db8ba7090d1226aebefab96a2c71cd5cfa7629d6ad3f61b79e/urllib3-1.24.1-py2.py3-none-any.whl
Collecting websocket-client==0.55.0 (from -r requirements.txt (line 42))
  Using cached https://files.pythonhosted.org/packages/38/54/684db2ba1b7a203602808446b8686ee786f93b4a7e080cdc440cc7e06e56/websocket_client-0.55.0-py2.py3-none-any.whl
Collecting Werkzeug==0.14.1 (from -r requirements.txt (line 43))
  Using cached https://files.pythonhosted.org/packages/20/c4/12e3e56473e52375aa29c4764e70d1b8f3efa6682bef8d0aae04fe335243/Werkzeug-0.14.1-py2.py3-none-any.whl
Collecting docker-compose==1.24.1 (from -r requirements.txt (line 44))
  Using cached https://files.pythonhosted.org/packages/dd/e6/1521d1dfd9c0da1d1863b18e592d91c3df222e55f258b9876fa1e59bc4b5/docker_compose-1.24.1-py2.py3-none-any.whl
Collecting netifaces==0.10.9 (from -r requirements.txt (line 45))
  Using cached https://files.pythonhosted.org/packages/0d/18/fd6e9c71a35b67a73160ec80a49da63d1eed2d2055054cc2995714949132/netifaces-0.10.9.tar.gz
Collecting pytest-cov==2.7.1 (from -r requirements.txt (line 46))
  Using cached https://files.pythonhosted.org/packages/84/7b/73f8522619d1cbb22b9a36f9c54bc5ce5e24648e53cc1bf566477d2d1f2b/pytest_cov-2.7.1-py2.py3-none-any.whl
Collecting pytest-mock==1.10.4 (from -r requirements.txt (line 47))
  Using cached https://files.pythonhosted.org/packages/30/43/8deecb4c123bbc16d25666f1a6d241109c97aeb2e50806b952661c8e4b95/pytest_mock-1.10.4-py2.py3-none-any.whl
Collecting gunicorn==19.9.0 (from -r requirements.txt (line 49))
  Using cached https://files.pythonhosted.org/packages/8c/da/b8dd8deb741bff556db53902d4706774c8e1e67265f69528c14c003644e6/gunicorn-19.9.0-py2.py3-none-any.whl
Collecting gitpython (from -r requirements.txt (line 50))
  Using cached https://files.pythonhosted.org/packages/8c/f9/c315aa88e51fabdc08e91b333cfefb255aff04a2ee96d632c32cb19180c9/GitPython-3.1.3-py3-none-any.whl
Collecting requests-cache==0.5.2 (from -r requirements.txt (line 51))
  Using cached https://files.pythonhosted.org/packages/7f/55/9b1c40eb83c16d8fc79c5f6c2ffade04208b080670fbfc35e0a5effb5a92/requests_cache-0.5.2-py2.py3-none-any.whl
Requirement already satisfied, skipping upgrade: setuptools in ./venv/lib/python3.7/site-packages (from jsonschema==3.0.0->-r requirements.txt (line 20)) (40.8.0)
Collecting cached-property<2,>=1.2.0 (from docker-compose==1.24.1->-r requirements.txt (line 44))
  Using cached https://files.pythonhosted.org/packages/3b/86/85c1be2e8db9e13ef9a350aecd6dea292bd612fa288c2f40d035bb750ded/cached_property-1.5.1-py2.py3-none-any.whl
Collecting docopt<0.7,>=0.6.1 (from docker-compose==1.24.1->-r requirements.txt (line 44))
  Using cached https://files.pythonhosted.org/packages/a2/55/8f8cab2afd404cf578136ef2cc5dfb50baa1761b68c9da1fb1e4eed343c9/docopt-0.6.2.tar.gz
Collecting texttable<0.10,>=0.9.0 (from docker-compose==1.24.1->-r requirements.txt (line 44))
  Using cached https://files.pythonhosted.org/packages/02/e1/2565e6b842de7945af0555167d33acfc8a615584ef7abd30d1eae00a4d80/texttable-0.9.1.tar.gz
Collecting docker[ssh]<4.0,>=3.7.0 (from docker-compose==1.24.1->-r requirements.txt (line 44))
  Using cached https://files.pythonhosted.org/packages/09/da/7cc7ecdcd01145e9924a8ccbe9c1baf3a362fc75d4cb150676eb5231ea60/docker-3.7.3-py2.py3-none-any.whl
Collecting dockerpty<0.5,>=0.4.1 (from docker-compose==1.24.1->-r requirements.txt (line 44))
  Using cached https://files.pythonhosted.org/packages/8d/ee/e9ecce4c32204a6738e0a5d5883d3413794d7498fe8b06f44becc028d3ba/dockerpty-0.4.1.tar.gz
Collecting coverage>=4.4 (from pytest-cov==2.7.1->-r requirements.txt (line 46))
  Using cached https://files.pythonhosted.org/packages/0d/85/b055f9c1a210f0c7e16e675b286ce4e16d80ba4c4e566de143e8d58dd7f2/coverage-5.1-cp37-cp37m-manylinux1_x86_64.whl
Collecting gitdb<5,>=4.0.1 (from gitpython->-r requirements.txt (line 50))
  Using cached https://files.pythonhosted.org/packages/48/11/d1800bca0a3bae820b84b7d813ad1eff15a48a64caea9c823fc8c1b119e8/gitdb-4.0.5-py3-none-any.whl
Collecting docker-pycreds>=0.4.0 (from docker[ssh]<4.0,>=3.7.0->docker-compose==1.24.1->-r requirements.txt (line 44))
  Using cached https://files.pythonhosted.org/packages/f5/e8/f6bd1eee09314e7e6dee49cbe2c5e22314ccdb38db16c9fc72d2fa80d054/docker_pycreds-0.4.0-py2.py3-none-any.whl
Collecting paramiko>=2.4.2; extra == "ssh" (from docker[ssh]<4.0,>=3.7.0->docker-compose==1.24.1->-r requirements.txt (line 44))
  Using cached https://files.pythonhosted.org/packages/06/1e/1e08baaaf6c3d3df1459fd85f0e7d2d6aa916f33958f151ee1ecc9800971/paramiko-2.7.1-py2.py3-none-any.whl
Collecting smmap<4,>=3.0.1 (from gitdb<5,>=4.0.1->gitpython->-r requirements.txt (line 50))
  Using cached https://files.pythonhosted.org/packages/b0/9a/4d409a6234eb940e6a78dfdfc66156e7522262f5f2fecca07dc55915952d/smmap-3.0.4-py2.py3-none-any.whl
Collecting bcrypt>=3.1.3 (from paramiko>=2.4.2; extra == "ssh"->docker[ssh]<4.0,>=3.7.0->docker-compose==1.24.1->-r requirements.txt (line 44))
  Using cached https://files.pythonhosted.org/packages/8b/1d/82826443777dd4a624e38a08957b975e75df859b381ae302cfd7a30783ed/bcrypt-3.1.7-cp34-abi3-manylinux1_x86_64.whl
Collecting pynacl>=1.0.1 (from paramiko>=2.4.2; extra == "ssh"->docker[ssh]<4.0,>=3.7.0->docker-compose==1.24.1->-r requirements.txt (line 44))
  Using cached https://files.pythonhosted.org/packages/9d/57/2f5e6226a674b2bcb6db531e8b383079b678df5b10cdaa610d6cf20d77ba/PyNaCl-1.4.0-cp35-abi3-manylinux1_x86_64.whl
docker-compose 1.24.1 has requirement jsonschema<3,>=2.5.1, but you'll have jsonschema 3.0.0 which is incompatible.
docker-compose 1.24.1 has requirement requests!=2.11.0,!=2.12.2,!=2.18.0,<2.21,>=2.6.1, but you'll have requests 2.21.0 which is incompatible.
Installing collected packages: pip, PyJWT, six, python-dateutil, urllib3, chardet, idna, certifi, requests, asn1crypto, pycparser, cffi, cryptography, adal, aniso8601, atomicwrites, attrs, cachetools, Click, pyrsistent, jsonschema, MarkupSafe, Jinja2, Werkzeug, itsdangerous, Flask, PyYAML, mistune, flasgger, Flask-Cors, pytz, Flask-RESTful, pyasn1, pyasn1-modules, rsa, google-auth, websocket-client, oauthlib, requests-oauthlib, kubernetes, more-itertools, pluggy, py, pytest, cached-property, docopt, texttable, docker-pycreds, bcrypt, pynacl, paramiko, docker, dockerpty, docker-compose, netifaces, coverage, pytest-cov, pytest-mock, gunicorn, smmap, gitdb, gitpython, requests-cache
  Found existing installation: pip 19.0.3
    Uninstalling pip-19.0.3:
      Successfully uninstalled pip-19.0.3
  Running setup.py install for pyrsistent: started
    Running setup.py install for pyrsistent: finished with status 'done'
  Running setup.py install for PyYAML: started
    Running setup.py install for PyYAML: finished with status 'done'
  Running setup.py install for docopt: started
    Running setup.py install for docopt: finished with status 'done'
  Running setup.py install for texttable: started
    Running setup.py install for texttable: finished with status 'done'
  Running setup.py install for dockerpty: started
    Running setup.py install for dockerpty: finished with status 'done'
  Running setup.py install for netifaces: started
    Running setup.py install for netifaces: finished with status 'done'
Successfully installed Click-7.0 Flask-1.0.2 Flask-Cors-3.0.7 Flask-RESTful-0.3.7 Jinja2-2.10 MarkupSafe-1.1.1 PyJWT-1.7.1 PyYAML-3.13 Werkzeug-0.14.1 adal-1.2.1 aniso8601-4.1.0 asn1crypto-0.24.0 atomicwrites-1.3.0 attrs-18.2.0 bcrypt-3.1.7 cached-property-1.5.1 cachetools-3.1.0 certifi-2018.11.29 cffi-1.12.1 chardet-3.0.4 coverage-5.1 cryptography-2.5 docker-3.7.3 docker-compose-1.24.1 docker-pycreds-0.4.0 dockerpty-0.4.1 docopt-0.6.2 flasgger-0.9.2 gitdb-4.0.5 gitpython-3.1.3 google-auth-1.6.3 gunicorn-19.9.0 idna-2.8 itsdangerous-1.1.0 jsonschema-3.0.0 kubernetes-8.0.1 mistune-0.8.4 more-itertools-6.0.0 netifaces-0.10.9 oauthlib-3.0.1 paramiko-2.7.1 pip-20.1.1 pluggy-0.9.0 py-1.8.0 pyasn1-0.4.5 pyasn1-modules-0.2.4 pycparser-2.19 pynacl-1.4.0 pyrsistent-0.14.11 pytest-4.3.0 pytest-cov-2.7.1 pytest-mock-1.10.4 python-dateutil-2.8.0 pytz-2018.9 requests-2.21.0 requests-cache-0.5.2 requests-oauthlib-1.2.0 rsa-4.0 six-1.12.0 smmap-3.0.4 texttable-0.9.1 urllib3-1.24.1 websocket-client-0.55.0
+ /var/lib/jenkins/jobs/tycho/workspace/tycho/start_tycho_api.sh
+ bin/tycho-functional-tests
/var/lib/jenkins/jobs/tycho/workspace/tycho/bin
/var/lib/jenkins/jobs/tycho/workspace/tycho
--testing http://localhost:5000/apidocs cycle: 1
 * Serving Flask app "api" (lazy loading)
 * Environment: production
   WARNING: Do not use the development server in a production environment.
   Use a production WSGI server instead.
 * Debug mode: on
INFO:werkzeug: * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Restarting with stat
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 144-159-625
--testing http://localhost:5000/apidocs cycle: 2
INFO:werkzeug:127.0.0.1 - - [15/Jun/2020 11:43:17] "GET /apidocs HTTP/1.1" 301 -
INFO:werkzeug:127.0.0.1 - - [15/Jun/2020 11:43:17] "GET /apidocs/ HTTP/1.1" 200 -
  --got answer: <title>Tycho Compute API</title>
Changed directory to:  /var/lib/jenkins/jobs/tycho/workspace/tycho/bin
total 20
-rw-r--r-- 1 evryscope service accounts  510 Jun 15 11:42 helm
drwxr-xr-x 2 evryscope service accounts   45 Jun 15 11:42 kubeless
-rwxr-xr-x 1 evryscope service accounts 3891 Jun 15 11:42 stage
-rwxr-xr-x 1 evryscope service accounts   36 Jun 15 11:42 test
-rwxr-xr-x 1 evryscope service accounts 1896 Jun 15 11:42 tycho
-rwxr-xr-x 1 evryscope service accounts 2564 Jun 15 11:42 tycho-functional-tests
--launching 1 instances
cannot get namespace from file: [Errno 2] No such file or directory: '/var/run/secrets/kubernetes.io/serviceaccount/namespace'
INFO:flask.app:start-system: {
  "name": "nginx",
  "username": "admin",
  "serviceaccount": "default",
  "env": {},
  "system": {
    "version": "3",
    "services": {
      "nginx": {
        "image": "nginx:stable-alpine",
        "ports": [
          "80:80"
        ],
        "deploy": {
          "resources": {
            "limits": {
              "cpus": "0.01",
              "memory": "50M"
            },
            "reservations": {
              "cpus": "0.01",
              "memory": "20M"
            }
          }
        }
      }
    }
  },
  "services": {
    "nginx": {
      "port": 80
    }
  }
}
DEBUG:flask.app:--:Validating obj {
  "name": "nginx",
  "username": "admin",
  "serviceaccount": "default",
  "env": {},
  "system": {
    "version": "3",
    "services": {
      "nginx": {
        "image": "nginx:stable-alpine",
        "ports": [
          "80:80"
        ],
        "deploy": {
          "resources": {
            "limits": {
              "cpus": "0.01",
              "memory": "50M"
            },
            "reservations": {
              "cpus": "0.01",
              "memory": "20M"
            }
          }
        }
      }
    }
  },
  "services": {
    "nginx": {
      "port": 80
    }
  }
}
DEBUG:flask.app:  schema: {
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "example": "some-stack",
      "description": "Description of the system provided and defined by this set of components."
    },
    "containers": {
      "type": "array",
      "items": {
        "$ref": "#/components/schemas/Container"
      }
    }
  }
}
DEBUG:tycho.model:compose {'version': '3', 'services': {'nginx': {'image': 'nginx:stable-alpine', 'ports': ['80:80'], 'deploy': {'resources': {'limits': {'cpus': '0.01', 'memory': '50M'}, 'reservations': {'cpus': '0.01', 'memory': '20M'}}}}}}
DEBUG:tycho.model:parsed-system: {
  "config": {},
  "name": "nginx",
  "username": "admin",
  "serviceAccount": "default",
  "containers": [
    {
      "name": "nginx",
      "image": "nginx:stable-alpine",
      "command": [],
      "env": [],
      "limits": {
        "cpus": "0.01",
        "memory": "50M"
      },
      "requests": {
        "cpus": "0.01",
        "memory": "20M"
      },
      "ports": [
        {
          "containerPort": "80"
        }
      ],
      "expose": [],
      "depends_on": [],
      "volumes": []
    }
  ],
  "services": {
    "nginx": {
      "port": 80
    }
  }
}
DEBUG:kubernetes.client.rest:response body: {"kind":"PersistentVolumeClaimList","apiVersion":"v1","metadata":{"selfLink":"/api/v1/namespaces/default/persistentvolumeclaims","resourceVersion":"928046"},"items":[]}

DEBUG:kubernetes.client.rest:response body: {"kind":"ServiceList","apiVersion":"v1","metadata":{"selfLink":"/api/v1/namespaces/default/services","resourceVersion":"928046"},"items":[]}

DEBUG:kubernetes.client.rest:response body: {"kind":"ConfigMapList","apiVersion":"v1","metadata":{"selfLink":"/api/v1/namespaces/default/configmaps","resourceVersion":"928046"},"items":[]}

DEBUG:tycho.tycho_utils:applying template /var/lib/jenkins/jobs/tycho/workspace/tycho/tycho/template/pod.yaml
DEBUG:tycho.tycho_utils:---
#
#  A Kubernetes Pod manifest template. Projects a
#  Tycho system object into a YAML pod definition.
#  Tags the object with a system unique
#  GUID label to enable later management.
#
#  Generated by Tycho 2020-06-15 15:43:18.847726
#
apiVersion: v1
kind: Pod
metadata:
  name: nginx-62d54e71784645a49bb3743c16e228e6
  labels:
    name: nginx-62d54e71784645a49bb3743c16e228e6
    username: admin
    executor: tycho
    tycho-guid: 62d54e71784645a49bb3743c16e228e6
    tycho-app-id: 
spec:

  serviceAccountName: default


  
  
  

#  initContainers:
#
#  
#
#  initContainers:
#  - name: volume-permissions
#    image: busybox:1.28
#    command: ['sh', '-c', 'chmod 777 -R /home/admin && echo OK']
#    volumeMounts:
#    - name: stdnfs
#      mountPath: /home/admin
#      subPath: admin
  containers:
    
  - name: nginx
    image: nginx:stable-alpine



    env:
    - name : GUID
      value: 62d54e71784645a49bb3743c16e228e6
    
    - name: NB_PREFIX
      value: /                                                                        
    

 # ports

    resources:
      
      
      limits:
        cpu: "0.01"
        # https://kubernetes.io/docs/tasks/manage-gpus/scheduling-gpus/
        #nvidia.com/gpu: "None"
        memory: "50M"
      
      
      
      
      requests:
        cpu: "0.01"
        memory: "20M"
      
      
      

    volumeMounts:



  volumes:
# Changes


  

DEBUG:tycho.model:--generated template: <generator object load_all at 0x7f28c002dd50>
INFO:tycho.kube:=====================================> <generator object load_all at 0x7f28c002dd50>
DEBUG:tycho.kube:creating deployment specification {'apiVersion': 'v1', 'kind': 'Pod', 'metadata': {'name': 'nginx-62d54e71784645a49bb3743c16e228e6', 'labels': {'name': 'nginx-62d54e71784645a49bb3743c16e228e6', 'username': 'admin', 'executor': 'tycho', 'tycho-guid': '62d54e71784645a49bb3743c16e228e6', 'tycho-app-id': None}}, 'spec': {'serviceAccountName': 'default', 'containers': [{'name': 'nginx', 'image': 'nginx:stable-alpine', 'env': [{'name': 'GUID', 'value': '62d54e71784645a49bb3743c16e228e6'}, {'name': 'NB_PREFIX', 'value': '/'}], 'resources': {'limits': {'cpu': '0.01', 'memory': '50M'}, 'requests': {'cpu': '0.01', 'memory': '20M'}}, 'volumeMounts': None}], 'volumes': None}}
DEBUG:tycho.kube:applying deployment {'apiVersion': 'v1', 'kind': 'Pod', 'metadata': {'name': 'nginx-62d54e71784645a49bb3743c16e228e6', 'labels': {'name': 'nginx-62d54e71784645a49bb3743c16e228e6', 'username': 'admin', 'executor': 'tycho', 'tycho-guid': '62d54e71784645a49bb3743c16e228e6', 'tycho-app-id': None}}, 'spec': {'serviceAccountName': 'default', 'containers': [{'name': 'nginx', 'image': 'nginx:stable-alpine', 'env': [{'name': 'GUID', 'value': '62d54e71784645a49bb3743c16e228e6'}, {'name': 'NB_PREFIX', 'value': '/'}], 'resources': {'limits': {'cpu': '0.01', 'memory': '50M'}, 'requests': {'cpu': '0.01', 'memory': '20M'}}, 'volumeMounts': None}], 'volumes': None}}
DEBUG:kubernetes.client.rest:response body: {"kind":"Deployment","apiVersion":"apps/v1","metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/nginx-62d54e71784645a49bb3743c16e228e6","uid":"4521042b-3da7-4ee6-9465-f429bfc712fe","resourceVersion":"928047","generation":1,"creationTimestamp":"2020-06-15T15:43:18Z","labels":{"executor":"tycho","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"},"managedFields":[{"manager":"Swagger-Codegen","operation":"Update","apiVersion":"apps/v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:tycho-guid":{},"f:username":{}}},"f:spec":{"f:progressDeadlineSeconds":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:tycho-guid":{},"f:username":{}}},"f:strategy":{"f:rollingUpdate":{".":{},"f:maxSurge":{},"f:maxUnavailable":{}},"f:type":{}},"f:template":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:name":{},"f:tycho-app-id":{},"f:tycho-guid":{},"f:username":{}},"f:name":{}},"f:spec":{"f:containers":{"k:{\"name\":\"nginx\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"GUID\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NB_PREFIX\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"}},"template":{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","creationTimestamp":null,"labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-app-id":"","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"}},"spec":{"containers":[{"name":"nginx","image":"nginx:stable-alpine","env":[{"name":"GUID","value":"62d54e71784645a49bb3743c16e228e6"},{"name":"NB_PREFIX","value":"/"}],"resources":{"limits":{"cpu":"10m","memory":"50M"},"requests":{"cpu":"10m","memory":"20M"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{},"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{}}

DEBUG:tycho.kube:deployment created. status={'available_replicas': None,
 'collision_count': None,
 'conditions': None,
 'observed_generation': None,
 'ready_replicas': None,
 'replicas': None,
 'unavailable_replicas': None,
 'updated_replicas': None}
DEBUG:tycho.kube:generating service for container nginx
DEBUG:tycho.tycho_utils:applying template /var/lib/jenkins/jobs/tycho/workspace/tycho/tycho/template/service.yaml
DEBUG:tycho.tycho_utils:# Generated by Tycho 2020-06-15 15:43:18.872339
apiVersion: v1
kind: Service
metadata:
  labels:
    name: nginx-62d54e71784645a49bb3743c16e228e6
    username: admin
    executor: tycho
    tycho-app: nginx-62d54e71784645a49bb3743c16e228e6
    tycho-guid: 62d54e71784645a49bb3743c16e228e6
  name: nginx-62d54e71784645a49bb3743c16e228e6
   
resourceversion: v1
spec:
  
  type: LoadBalancer
  
  selector:
    name: nginx-62d54e71784645a49bb3743c16e228e6
  ports:
  
  
  
  - name: port-1
    port: 80
    protocol: TCP
    targetPort: 80
  
  
  
DEBUG:tycho.model:--generated template: <generator object load_all at 0x7f28b20b1250>
DEBUG:tycho.kube:-- creating service for container nginx
DEBUG:kubernetes.client.rest:response body: {"kind":"Service","apiVersion":"v1","metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","namespace":"default","selfLink":"/api/v1/namespaces/default/services/nginx-62d54e71784645a49bb3743c16e228e6","uid":"d19e1579-07a2-4fdd-b386-a973ccd17be6","resourceVersion":"928059","creationTimestamp":"2020-06-15T15:43:18Z","labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-app":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"},"managedFields":[{"manager":"Swagger-Codegen","operation":"Update","apiVersion":"v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:name":{},"f:tycho-app":{},"f:tycho-guid":{},"f:username":{}}},"f:spec":{"f:externalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":80,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"port-1","protocol":"TCP","port":80,"targetPort":80,"nodePort":30412}],"selector":{"name":"nginx-62d54e71784645a49bb3743c16e228e6"},"clusterIP":"10.105.67.10","type":"LoadBalancer","sessionAffinity":"None","externalTrafficPolicy":"Cluster"},"status":{"loadBalancer":{}}}

INFO:tycho.kube:-================================> *** nginx-62d54e71784645a49bb3743c16e228e6
DEBUG:tycho.kube:--------------> [{'name': 'port-1',
 'node_port': 30412,
 'port': 80,
 'protocol': 'TCP',
 'target_port': 80}]
DEBUG:tycho.kube:-- port-forward: /bin/kubectl port-forward --pod-running-timeout=3m0s deployment/nginx-62d54e71784645a49bb3743c16e228e6 30412:80
DEBUG:tycho.kube:service nginx-62d54e71784645a49bb3743c16e228e6 ingress ip: 127.0.0.1
DEBUG:tycho.kube:result: {
  "name": "nginx-62d54e71784645a49bb3743c16e228e6",
  "sid": "62d54e71784645a49bb3743c16e228e6",
  "containers": {
    "nginx": {
      "ip_address": "127.0.0.1",
      "port-1": 30412
    }
  }
}
INFO:werkzeug:127.0.0.1 - - [15/Jun/2020 11:43:21] "POST /system/start HTTP/1.1" 200 -
url: http://localhost:5000
SERVICE                        GUID                                IP_ADDRESS      PORT   
nginx                          62d54e71784645a49bb3743c16e228e6    127.0.0.1       30412  
error: unable to forward port because pod is not running. Current status=Pending
nginx-62d54e71784645a49bb3743c16e228e6   LoadBalancer   10.105.67.10   <pending>     80:30412/TCP   4s
--status...
cannot get namespace from file: [Errno 2] No such file or directory: '/var/run/secrets/kubernetes.io/serviceaccount/namespace'
DEBUG:root:list-request: {
  "username": "admin"
}
DEBUG:flask.app:--:Validating obj {
  "username": "admin"
}
DEBUG:flask.app:  schema: {
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "example": "test-app",
      "nullable": true,
      "description": "Identifier of system to list"
    }
  }
}
DEBUG:tycho.kube:-- status label: username=admin
DEBUG:kubernetes.client.rest:response body: {"kind":"DeploymentList","apiVersion":"apps/v1","metadata":{"selfLink":"/apis/apps/v1/namespaces/default/deployments","resourceVersion":"928074"},"items":[{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/nginx-62d54e71784645a49bb3743c16e228e6","uid":"4521042b-3da7-4ee6-9465-f429bfc712fe","resourceVersion":"928061","generation":1,"creationTimestamp":"2020-06-15T15:43:18Z","labels":{"executor":"tycho","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"},"annotations":{"deployment.kubernetes.io/revision":"1"},"managedFields":[{"manager":"Swagger-Codegen","operation":"Update","apiVersion":"apps/v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:tycho-guid":{},"f:username":{}}},"f:spec":{"f:progressDeadlineSeconds":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:tycho-guid":{},"f:username":{}}},"f:strategy":{"f:rollingUpdate":{".":{},"f:maxSurge":{},"f:maxUnavailable":{}},"f:type":{}},"f:template":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:name":{},"f:tycho-app-id":{},"f:tycho-guid":{},"f:username":{}},"f:name":{}},"f:spec":{"f:containers":{"k:{\"name\":\"nginx\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"GUID\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NB_PREFIX\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:deployment.kubernetes.io/revision":{}}},"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Progressing\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:observedGeneration":{},"f:replicas":{},"f:unavailableReplicas":{},"f:updatedReplicas":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"}},"template":{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","creationTimestamp":null,"labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-app-id":"","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"}},"spec":{"containers":[{"name":"nginx","image":"nginx:stable-alpine","env":[{"name":"GUID","value":"62d54e71784645a49bb3743c16e228e6"},{"name":"NB_PREFIX","value":"/"}],"resources":{"limits":{"cpu":"10m","memory":"50M"},"requests":{"cpu":"10m","memory":"20M"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{},"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"unavailableReplicas":1,"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2020-06-15T15:43:18Z","lastTransitionTime":"2020-06-15T15:43:18Z","reason":"MinimumReplicasUnavailable","message":"Deployment does not have minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-06-15T15:43:18Z","lastTransitionTime":"2020-06-15T15:43:18Z","reason":"ReplicaSetUpdated","message":"ReplicaSet \"nginx-62d54e71784645a49bb3743c16e228e6-5586499dff\" is progressing."}]}}]}

Spec: <class 'dict'>
DEV PHASE ENVIRON----------------> prod
RESPONSE ITEMS:----------------> [{'api_version': None,
 'kind': None,
 'metadata': {'annotations': {'deployment.kubernetes.io/revision': '1'},
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2020, 6, 15, 15, 43, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': 1,
              'initializers': None,
              'labels': {'executor': 'tycho',
                         'tycho-guid': '62d54e71784645a49bb3743c16e228e6',
                         'username': 'admin'},
              'name': 'nginx-62d54e71784645a49bb3743c16e228e6',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '928061',
              'self_link': '/apis/apps/v1/namespaces/default/deployments/nginx-62d54e71784645a49bb3743c16e228e6',
              'uid': '4521042b-3da7-4ee6-9465-f429bfc712fe'},
 'spec': {'min_ready_seconds': None,
          'paused': None,
          'progress_deadline_seconds': 600,
          'replicas': 1,
          'revision_history_limit': 10,
          'selector': {'match_expressions': None,
                       'match_labels': {'tycho-guid': '62d54e71784645a49bb3743c16e228e6',
                                        'username': 'admin'}},
          'strategy': {'rolling_update': {'max_surge': '25%',
                                          'max_unavailable': '25%'},
                       'type': 'RollingUpdate'},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'executor': 'tycho',
                                               'name': 'nginx-62d54e71784645a49bb3743c16e228e6',
                                               'tycho-app-id': '',
                                               'tycho-guid': '62d54e71784645a49bb3743c16e228e6',
                                               'username': 'admin'},
                                    'name': 'nginx-62d54e71784645a49bb3743c16e228e6',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': None,
                                                'env': [{'name': 'GUID',
                                                         'value': '62d54e71784645a49bb3743c16e228e6',
                                                         'value_from': None},
                                                        {'name': 'NB_PREFIX',
                                                         'value': '/',
                                                         'value_from': None}],
                                                'env_from': None,
                                                'image': 'nginx:stable-alpine',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'nginx',
                                                'ports': None,
                                                'readiness_probe': None,
                                                'resources': {'limits': {'cpu': '10m',
                                                                         'memory': '50M'},
                                                              'requests': {'cpu': '10m',
                                                                           'memory': '20M'}},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Always',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': 'default',
                                'service_account_name': 'default',
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'available_replicas': None,
            'collision_count': None,
            'conditions': [{'last_transition_time': datetime.datetime(2020, 6, 15, 15, 43, 18, tzinfo=tzutc()),
                            'last_update_time': datetime.datetime(2020, 6, 15, 15, 43, 18, tzinfo=tzutc()),
                            'message': 'Deployment does not have minimum '
                                       'availability.',
                            'reason': 'MinimumReplicasUnavailable',
                            'status': 'False',
                            'type': 'Available'},
                           {'last_transition_time': datetime.datetime(2020, 6, 15, 15, 43, 18, tzinfo=tzutc()),
                            'last_update_time': datetime.datetime(2020, 6, 15, 15, 43, 18, tzinfo=tzutc()),
                            'message': 'ReplicaSet '
                                       '"nginx-62d54e71784645a49bb3743c16e228e6-5586499dff" '
                                       'is progressing.',
                            'reason': 'ReplicaSetUpdated',
                            'status': 'True',
                            'type': 'Progressing'}],
            'observed_generation': 1,
            'ready_replicas': None,
            'replicas': 1,
            'unavailable_replicas': 1,
            'updated_replicas': 1}}]DEBUG:tycho.kube:-- pod-resources {'nginx': {'cpu': '10m', 'memory': '50M'}}
DEBUG:kubernetes.client.rest:response body: {"kind":"ServiceList","apiVersion":"v1","metadata":{"selfLink":"/api/v1/namespaces/default/services","resourceVersion":"928074"},"items":[{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","namespace":"default","selfLink":"/api/v1/namespaces/default/services/nginx-62d54e71784645a49bb3743c16e228e6","uid":"d19e1579-07a2-4fdd-b386-a973ccd17be6","resourceVersion":"928059","creationTimestamp":"2020-06-15T15:43:18Z","labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-app":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"},"managedFields":[{"manager":"Swagger-Codegen","operation":"Update","apiVersion":"v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:name":{},"f:tycho-app":{},"f:tycho-guid":{},"f:username":{}}},"f:spec":{"f:externalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":80,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"port-1","protocol":"TCP","port":80,"targetPort":80,"nodePort":30412}],"selector":{"name":"nginx-62d54e71784645a49bb3743c16e228e6"},"clusterIP":"10.105.67.10","type":"LoadBalancer","sessionAffinity":"None","externalTrafficPolicy":"Cluster"},"status":{"loadBalancer":{}}}]}

INFO:tycho.kube:-================================> *** nginx-62d54e71784645a49bb3743c16e228e6
DEBUG:tycho.kube:service nginx-62d54e71784645a49bb3743c16e228e6 ingress ip: 127.0.0.1
INFO:werkzeug:127.0.0.1 - - [15/Jun/2020 11:43:22] "POST /system/status HTTP/1.1" 200 -
url: http://localhost:5000
SYSTEM                         GUID                                IP_ADDRESS      PORT    CREATION_TIME
nginx-62d54e71784645a49bb374.. 62d54e71784645a49bb3743c16e228e6    127.0.0.1       30412   6-15-2020 15:43:18
--testing 1 instances at 172.25.8.116 ...
cannot get namespace from file: [Errno 2] No such file or directory: '/var/run/secrets/kubernetes.io/serviceaccount/namespace'
DEBUG:root:list-request: {
  "username": "admin"
}
DEBUG:flask.app:--:Validating obj {
  "username": "admin"
}
DEBUG:flask.app:  schema: {
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "example": "test-app",
      "nullable": true,
      "description": "Identifier of system to list"
    }
  }
}
DEBUG:tycho.kube:-- status label: username=admin
DEBUG:kubernetes.client.rest:response body: {"kind":"DeploymentList","apiVersion":"apps/v1","metadata":{"selfLink":"/apis/apps/v1/namespaces/default/deployments","resourceVersion":"928074"},"items":[{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/nginx-62d54e71784645a49bb3743c16e228e6","uid":"4521042b-3da7-4ee6-9465-f429bfc712fe","resourceVersion":"928061","generation":1,"creationTimestamp":"2020-06-15T15:43:18Z","labels":{"executor":"tycho","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"},"annotations":{"deployment.kubernetes.io/revision":"1"},"managedFields":[{"manager":"Swagger-Codegen","operation":"Update","apiVersion":"apps/v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:tycho-guid":{},"f:username":{}}},"f:spec":{"f:progressDeadlineSeconds":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:tycho-guid":{},"f:username":{}}},"f:strategy":{"f:rollingUpdate":{".":{},"f:maxSurge":{},"f:maxUnavailable":{}},"f:type":{}},"f:template":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:name":{},"f:tycho-app-id":{},"f:tycho-guid":{},"f:username":{}},"f:name":{}},"f:spec":{"f:containers":{"k:{\"name\":\"nginx\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"GUID\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NB_PREFIX\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:deployment.kubernetes.io/revision":{}}},"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Progressing\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:observedGeneration":{},"f:replicas":{},"f:unavailableReplicas":{},"f:updatedReplicas":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"}},"template":{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","creationTimestamp":null,"labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-app-id":"","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"}},"spec":{"containers":[{"name":"nginx","image":"nginx:stable-alpine","env":[{"name":"GUID","value":"62d54e71784645a49bb3743c16e228e6"},{"name":"NB_PREFIX","value":"/"}],"resources":{"limits":{"cpu":"10m","memory":"50M"},"requests":{"cpu":"10m","memory":"20M"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{},"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"unavailableReplicas":1,"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2020-06-15T15:43:18Z","lastTransitionTime":"2020-06-15T15:43:18Z","reason":"MinimumReplicasUnavailable","message":"Deployment does not have minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-06-15T15:43:18Z","lastTransitionTime":"2020-06-15T15:43:18Z","reason":"ReplicaSetUpdated","message":"ReplicaSet \"nginx-62d54e71784645a49bb3743c16e228e6-5586499dff\" is progressing."}]}}]}


{
  "status": "success",
  "result": [
    {
      "name": "nginx-62d54e71784645a49bb3743c16e228e6",
      "app_id": "nginx-62d54e71784645a49bb3743c16e228e6",
      "sid": "62d54e71784645a49bb3743c16e228e6",
      "ip_address": "127.0.0.1",
      "port": "30412",
      "creation_time": "6-15-2020 15:43:18",
      "utilization": {
        "nginx": {
          "cpu": "10m",
          "memory": "50M"
        }
      }
    }
  ],
  "message": "Get status for system None"
}
RESPONSE ITEMS:----------------> [{'api_version': None,
 'kind': None,
 'metadata': {'annotations': {'deployment.kubernetes.io/revision': '1'},
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2020, 6, 15, 15, 43, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': 1,
              'initializers': None,
              'labels': {'executor': 'tycho',
                         'tycho-guid': '62d54e71784645a49bb3743c16e228e6',
                         'username': 'admin'},
              'name': 'nginx-62d54e71784645a49bb3743c16e228e6',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '928061',
              'self_link': '/apis/apps/v1/namespaces/default/deployments/nginx-62d54e71784645a49bb3743c16e228e6',
              'uid': '4521042b-3da7-4ee6-9465-f429bfc712fe'},
 'spec': {'min_ready_seconds': None,
          'paused': None,
          'progress_deadline_seconds': 600,
          'replicas': 1,
          'revision_history_limit': 10,
          'selector': {'match_expressions': None,
                       'match_labels': {'tycho-guid': '62d54e71784645a49bb3743c16e228e6',
                                        'username': 'admin'}},
          'strategy': {'rolling_update': {'max_surge': '25%',
                                          'max_unavailable': '25%'},
                       'type': 'RollingUpdate'},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'executor': 'tycho',
                                               'name': 'nginx-62d54e71784645a49bb3743c16e228e6',
                                               'tycho-app-id': '',
                                               'tycho-guid': '62d54e71784645a49bb3743c16e228e6',
                                               'username': 'admin'},
                                    'name': 'nginx-62d54e71784645a49bb3743c16e228e6',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': None,
                                                'env': [{'name': 'GUID',
                                                         'value': '62d54e71784645a49bb3743c16e228e6',
                                                         'value_from': None},
                                                        {'name': 'NB_PREFIX',
                                                         'value': '/',
                                                         'value_from': None}],
                                                'env_from': None,
                                                'image': 'nginx:stable-alpine',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'nginx',
                                                'ports': None,
                                                'readiness_probe': None,
                                                'resources': {'limits': {'cpu': '10m',
                                                                         'memory': '50M'},
                                                              'requests': {'cpu': '10m',
                                                                           'memory': '20M'}},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Always',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': 'default',
                                'service_account_name': 'default',
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'available_replicas': None,
            'collision_count': None,
            'conditions': [{'last_transition_time': datetime.datetime(2020, 6, 15, 15, 43, 18, tzinfo=tzutc()),
                            'last_update_time': datetime.datetime(2020, 6, 15, 15, 43, 18, tzinfo=tzutc()),
                            'message': 'Deployment does not have minimum '
                                       'availability.',
                            'reason': 'MinimumReplicasUnavailable',
                            'status': 'False',
                            'type': 'Available'},
                           {'last_transition_time': datetime.datetime(2020, 6, 15, 15, 43, 18, tzinfo=tzutc()),
                            'last_update_time': datetime.datetime(2020, 6, 15, 15, 43, 18, tzinfo=tzutc()),
                            'message': 'ReplicaSet '
                                       '"nginx-62d54e71784645a49bb3743c16e228e6-5586499dff" '
                                       'is progressing.',
                            'reason': 'ReplicaSetUpdated',
                            'status': 'True',
                            'type': 'Progressing'}],
            'observed_generation': 1,
            'ready_replicas': None,
            'replicas': 1,
            'unavailable_replicas': 1,
            'updated_replicas': 1}}]DEBUG:tycho.kube:-- pod-resources {'nginx': {'cpu': '10m', 'memory': '50M'}}
DEBUG:kubernetes.client.rest:response body: {"kind":"ServiceList","apiVersion":"v1","metadata":{"selfLink":"/api/v1/namespaces/default/services","resourceVersion":"928074"},"items":[{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","namespace":"default","selfLink":"/api/v1/namespaces/default/services/nginx-62d54e71784645a49bb3743c16e228e6","uid":"d19e1579-07a2-4fdd-b386-a973ccd17be6","resourceVersion":"928059","creationTimestamp":"2020-06-15T15:43:18Z","labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-app":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"},"managedFields":[{"manager":"Swagger-Codegen","operation":"Update","apiVersion":"v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:name":{},"f:tycho-app":{},"f:tycho-guid":{},"f:username":{}}},"f:spec":{"f:externalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":80,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"port-1","protocol":"TCP","port":80,"targetPort":80,"nodePort":30412}],"selector":{"name":"nginx-62d54e71784645a49bb3743c16e228e6"},"clusterIP":"10.105.67.10","type":"LoadBalancer","sessionAffinity":"None","externalTrafficPolicy":"Cluster"},"status":{"loadBalancer":{}}}]}

INFO:tycho.kube:-================================> *** nginx-62d54e71784645a49bb3743c16e228e6
DEBUG:tycho.kube:service nginx-62d54e71784645a49bb3743c16e228e6 ingress ip: 127.0.0.1
INFO:werkzeug:127.0.0.1 - - [15/Jun/2020 11:43:23] "POST /system/status HTTP/1.1" 200 -
--testing http://172.25.8.116:30412 cycle: 1
--testing http://172.25.8.116:30412 cycle: 2
  --got answer: <title>Welcome to nginx!</title>
--all 1 instances are taking traffic
--status...
cannot get namespace from file: [Errno 2] No such file or directory: '/var/run/secrets/kubernetes.io/serviceaccount/namespace'
DEBUG:root:list-request: {
  "username": "admin"
}
DEBUG:flask.app:--:Validating obj {
  "username": "admin"
}
DEBUG:flask.app:  schema: {
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "example": "test-app",
      "nullable": true,
      "description": "Identifier of system to list"
    }
  }
}
DEBUG:tycho.kube:-- status label: username=admin
DEBUG:kubernetes.client.rest:response body: {"kind":"DeploymentList","apiVersion":"apps/v1","metadata":{"selfLink":"/apis/apps/v1/namespaces/default/deployments","resourceVersion":"928098"},"items":[{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/nginx-62d54e71784645a49bb3743c16e228e6","uid":"4521042b-3da7-4ee6-9465-f429bfc712fe","resourceVersion":"928090","generation":1,"creationTimestamp":"2020-06-15T15:43:18Z","labels":{"executor":"tycho","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"},"annotations":{"deployment.kubernetes.io/revision":"1"},"managedFields":[{"manager":"Swagger-Codegen","operation":"Update","apiVersion":"apps/v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:tycho-guid":{},"f:username":{}}},"f:spec":{"f:progressDeadlineSeconds":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:tycho-guid":{},"f:username":{}}},"f:strategy":{"f:rollingUpdate":{".":{},"f:maxSurge":{},"f:maxUnavailable":{}},"f:type":{}},"f:template":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:name":{},"f:tycho-app-id":{},"f:tycho-guid":{},"f:username":{}},"f:name":{}},"f:spec":{"f:containers":{"k:{\"name\":\"nginx\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"GUID\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NB_PREFIX\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2020-06-15T15:43:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:deployment.kubernetes.io/revision":{}}},"f:status":{"f:availableReplicas":{},"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Progressing\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updatedReplicas":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"}},"template":{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","creationTimestamp":null,"labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-app-id":"","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"}},"spec":{"containers":[{"name":"nginx","image":"nginx:stable-alpine","env":[{"name":"GUID","value":"62d54e71784645a49bb3743c16e228e6"},{"name":"NB_PREFIX","value":"/"}],"resources":{"limits":{"cpu":"10m","memory":"50M"},"requests":{"cpu":"10m","memory":"20M"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{},"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-06-15T15:43:27Z","lastTransitionTime":"2020-06-15T15:43:27Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-06-15T15:43:27Z","lastTransitionTime":"2020-06-15T15:43:18Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"nginx-62d54e71784645a49bb3743c16e228e6-5586499dff\" has successfully progressed."}]}}]}


{
  "status": "success",
  "result": [
    {
      "name": "nginx-62d54e71784645a49bb3743c16e228e6",
      "app_id": "nginx-62d54e71784645a49bb3743c16e228e6",
      "sid": "62d54e71784645a49bb3743c16e228e6",
      "ip_address": "127.0.0.1",
      "port": "30412",
      "creation_time": "6-15-2020 15:43:18",
      "utilization": {
        "nginx": {
          "cpu": "10m",
          "memory": "50M"
        }
      }
    }
  ],
  "message": "Get status for system None"
}
RESPONSE ITEMS:----------------> [{'api_version': None,
 'kind': None,
 'metadata': {'annotations': {'deployment.kubernetes.io/revision': '1'},
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2020, 6, 15, 15, 43, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': 1,
              'initializers': None,
              'labels': {'executor': 'tycho',
                         'tycho-guid': '62d54e71784645a49bb3743c16e228e6',
                         'username': 'admin'},
              'name': 'nginx-62d54e71784645a49bb3743c16e228e6',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '928090',
              'self_link': '/apis/apps/v1/namespaces/default/deployments/nginx-62d54e71784645a49bb3743c16e228e6',
              'uid': '4521042b-3da7-4ee6-9465-f429bfc712fe'},
 'spec': {'min_ready_seconds': None,
          'paused': None,
          'progress_deadline_seconds': 600,
          'replicas': 1,
          'revision_history_limit': 10,
          'selector': {'match_expressions': None,
                       'match_labels': {'tycho-guid': '62d54e71784645a49bb3743c16e228e6',
                                        'username': 'admin'}},
          'strategy': {'rolling_update': {'max_surge': '25%',
                                          'max_unavailable': '25%'},
                       'type': 'RollingUpdate'},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'executor': 'tycho',
                                               'name': 'nginx-62d54e71784645a49bb3743c16e228e6',
                                               'tycho-app-id': '',
                                               'tycho-guid': '62d54e71784645a49bb3743c16e228e6',
                                               'username': 'admin'},
                                    'name': 'nginx-62d54e71784645a49bb3743c16e228e6',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': None,
                                                'env': [{'name': 'GUID',
                                                         'value': '62d54e71784645a49bb3743c16e228e6',
                                                         'value_from': None},
                                                        {'name': 'NB_PREFIX',
                                                         'value': '/',
                                                         'value_from': None}],
                                                'env_from': None,
                                                'image': 'nginx:stable-alpine',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'nginx',
                                                'ports': None,
                                                'readiness_probe': None,
                                                'resources': {'limits': {'cpu': '10m',
                                                                         'memory': '50M'},
                                                              'requests': {'cpu': '10m',
                                                                           'memory': '20M'}},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Always',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': 'default',
                                'service_account_name': 'default',
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'available_replicas': 1,
            'collision_count': None,
            'conditions': [{'last_transition_time': datetime.datetime(2020, 6, 15, 15, 43, 27, tzinfo=tzutc()),
                            'last_update_time': datetime.datetime(2020, 6, 15, 15, 43, 27, tzinfo=tzutc()),
                            'message': 'Deployment has minimum availability.',
                            'reason': 'MinimumReplicasAvailable',
                            'status': 'True',
                            'type': 'Available'},
                           {'last_transition_time': datetime.datetime(2020, 6, 15, 15, 43, 18, tzinfo=tzutc()),
                            'last_update_time': datetime.datetime(2020, 6, 15, 15, 43, 27, tzinfo=tzutc()),
                            'message': 'ReplicaSet '
                                       '"nginx-62d54e71784645a49bb3743c16e228e6-5586499dff" '
                                       'has successfully progressed.',
                            'reason': 'NewReplicaSetAvailable',
                            'status': 'True',
                            'type': 'Progressing'}],
            'observed_generation': 1,
            'ready_replicas': 1,
            'replicas': 1,
            'unavailable_replicas': None,
            'updated_replicas': 1}}]DEBUG:tycho.kube:-- pod-resources {'nginx': {'cpu': '10m', 'memory': '50M'}}
DEBUG:kubernetes.client.rest:response body: {"kind":"ServiceList","apiVersion":"v1","metadata":{"selfLink":"/api/v1/namespaces/default/services","resourceVersion":"928098"},"items":[{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","namespace":"default","selfLink":"/api/v1/namespaces/default/services/nginx-62d54e71784645a49bb3743c16e228e6","uid":"d19e1579-07a2-4fdd-b386-a973ccd17be6","resourceVersion":"928059","creationTimestamp":"2020-06-15T15:43:18Z","labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-app":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"},"managedFields":[{"manager":"Swagger-Codegen","operation":"Update","apiVersion":"v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:name":{},"f:tycho-app":{},"f:tycho-guid":{},"f:username":{}}},"f:spec":{"f:externalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":80,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"port-1","protocol":"TCP","port":80,"targetPort":80,"nodePort":30412}],"selector":{"name":"nginx-62d54e71784645a49bb3743c16e228e6"},"clusterIP":"10.105.67.10","type":"LoadBalancer","sessionAffinity":"None","externalTrafficPolicy":"Cluster"},"status":{"loadBalancer":{}}}]}

INFO:tycho.kube:-================================> *** nginx-62d54e71784645a49bb3743c16e228e6
DEBUG:tycho.kube:service nginx-62d54e71784645a49bb3743c16e228e6 ingress ip: 127.0.0.1
INFO:werkzeug:127.0.0.1 - - [15/Jun/2020 11:43:30] "POST /system/status HTTP/1.1" 200 -
url: http://localhost:5000
SYSTEM                         GUID                                IP_ADDRESS      PORT    CREATION_TIME
nginx-62d54e71784645a49bb374.. 62d54e71784645a49bb3743c16e228e6    127.0.0.1       30412   6-15-2020 15:43:18
--taking instances down
cannot get namespace from file: [Errno 2] No such file or directory: '/var/run/secrets/kubernetes.io/serviceaccount/namespace'
DEBUG:root:list-request: {
  "username": "admin"
}
DEBUG:flask.app:--:Validating obj {
  "username": "admin"
}
DEBUG:flask.app:  schema: {
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "example": "test-app",
      "nullable": true,
      "description": "Identifier of system to list"
    }
  }
}
DEBUG:tycho.kube:-- status label: username=admin
DEBUG:kubernetes.client.rest:response body: {"kind":"DeploymentList","apiVersion":"apps/v1","metadata":{"selfLink":"/apis/apps/v1/namespaces/default/deployments","resourceVersion":"928098"},"items":[{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/nginx-62d54e71784645a49bb3743c16e228e6","uid":"4521042b-3da7-4ee6-9465-f429bfc712fe","resourceVersion":"928090","generation":1,"creationTimestamp":"2020-06-15T15:43:18Z","labels":{"executor":"tycho","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"},"annotations":{"deployment.kubernetes.io/revision":"1"},"managedFields":[{"manager":"Swagger-Codegen","operation":"Update","apiVersion":"apps/v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:tycho-guid":{},"f:username":{}}},"f:spec":{"f:progressDeadlineSeconds":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:tycho-guid":{},"f:username":{}}},"f:strategy":{"f:rollingUpdate":{".":{},"f:maxSurge":{},"f:maxUnavailable":{}},"f:type":{}},"f:template":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:name":{},"f:tycho-app-id":{},"f:tycho-guid":{},"f:username":{}},"f:name":{}},"f:spec":{"f:containers":{"k:{\"name\":\"nginx\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"GUID\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NB_PREFIX\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2020-06-15T15:43:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:deployment.kubernetes.io/revision":{}}},"f:status":{"f:availableReplicas":{},"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Progressing\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updatedReplicas":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"}},"template":{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","creationTimestamp":null,"labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-app-id":"","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"}},"spec":{"containers":[{"name":"nginx","image":"nginx:stable-alpine","env":[{"name":"GUID","value":"62d54e71784645a49bb3743c16e228e6"},{"name":"NB_PREFIX","value":"/"}],"resources":{"limits":{"cpu":"10m","memory":"50M"},"requests":{"cpu":"10m","memory":"20M"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{},"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-06-15T15:43:27Z","lastTransitionTime":"2020-06-15T15:43:27Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-06-15T15:43:27Z","lastTransitionTime":"2020-06-15T15:43:18Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"nginx-62d54e71784645a49bb3743c16e228e6-5586499dff\" has successfully progressed."}]}}]}


{
  "status": "success",
  "result": [
    {
      "name": "nginx-62d54e71784645a49bb3743c16e228e6",
      "app_id": "nginx-62d54e71784645a49bb3743c16e228e6",
      "sid": "62d54e71784645a49bb3743c16e228e6",
      "ip_address": "127.0.0.1",
      "port": "30412",
      "creation_time": "6-15-2020 15:43:18",
      "utilization": {
        "nginx": {
          "cpu": "10m",
          "memory": "50M"
        }
      }
    }
  ],
  "message": "Get status for system None"
}
RESPONSE ITEMS:----------------> [{'api_version': None,
 'kind': None,
 'metadata': {'annotations': {'deployment.kubernetes.io/revision': '1'},
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2020, 6, 15, 15, 43, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': 1,
              'initializers': None,
              'labels': {'executor': 'tycho',
                         'tycho-guid': '62d54e71784645a49bb3743c16e228e6',
                         'username': 'admin'},
              'name': 'nginx-62d54e71784645a49bb3743c16e228e6',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '928090',
              'self_link': '/apis/apps/v1/namespaces/default/deployments/nginx-62d54e71784645a49bb3743c16e228e6',
              'uid': '4521042b-3da7-4ee6-9465-f429bfc712fe'},
 'spec': {'min_ready_seconds': None,
          'paused': None,
          'progress_deadline_seconds': 600,
          'replicas': 1,
          'revision_history_limit': 10,
          'selector': {'match_expressions': None,
                       'match_labels': {'tycho-guid': '62d54e71784645a49bb3743c16e228e6',
                                        'username': 'admin'}},
          'strategy': {'rolling_update': {'max_surge': '25%',
                                          'max_unavailable': '25%'},
                       'type': 'RollingUpdate'},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'executor': 'tycho',
                                               'name': 'nginx-62d54e71784645a49bb3743c16e228e6',
                                               'tycho-app-id': '',
                                               'tycho-guid': '62d54e71784645a49bb3743c16e228e6',
                                               'username': 'admin'},
                                    'name': 'nginx-62d54e71784645a49bb3743c16e228e6',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': None,
                                                'env': [{'name': 'GUID',
                                                         'value': '62d54e71784645a49bb3743c16e228e6',
                                                         'value_from': None},
                                                        {'name': 'NB_PREFIX',
                                                         'value': '/',
                                                         'value_from': None}],
                                                'env_from': None,
                                                'image': 'nginx:stable-alpine',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'nginx',
                                                'ports': None,
                                                'readiness_probe': None,
                                                'resources': {'limits': {'cpu': '10m',
                                                                         'memory': '50M'},
                                                              'requests': {'cpu': '10m',
                                                                           'memory': '20M'}},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Always',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': 'default',
                                'service_account_name': 'default',
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'available_replicas': 1,
            'collision_count': None,
            'conditions': [{'last_transition_time': datetime.datetime(2020, 6, 15, 15, 43, 27, tzinfo=tzutc()),
                            'last_update_time': datetime.datetime(2020, 6, 15, 15, 43, 27, tzinfo=tzutc()),
                            'message': 'Deployment has minimum availability.',
                            'reason': 'MinimumReplicasAvailable',
                            'status': 'True',
                            'type': 'Available'},
                           {'last_transition_time': datetime.datetime(2020, 6, 15, 15, 43, 18, tzinfo=tzutc()),
                            'last_update_time': datetime.datetime(2020, 6, 15, 15, 43, 27, tzinfo=tzutc()),
                            'message': 'ReplicaSet '
                                       '"nginx-62d54e71784645a49bb3743c16e228e6-5586499dff" '
                                       'has successfully progressed.',
                            'reason': 'NewReplicaSetAvailable',
                            'status': 'True',
                            'type': 'Progressing'}],
            'observed_generation': 1,
            'ready_replicas': 1,
            'replicas': 1,
            'unavailable_replicas': None,
            'updated_replicas': 1}}]DEBUG:tycho.kube:-- pod-resources {'nginx': {'cpu': '10m', 'memory': '50M'}}
DEBUG:kubernetes.client.rest:response body: {"kind":"ServiceList","apiVersion":"v1","metadata":{"selfLink":"/api/v1/namespaces/default/services","resourceVersion":"928098"},"items":[{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","namespace":"default","selfLink":"/api/v1/namespaces/default/services/nginx-62d54e71784645a49bb3743c16e228e6","uid":"d19e1579-07a2-4fdd-b386-a973ccd17be6","resourceVersion":"928059","creationTimestamp":"2020-06-15T15:43:18Z","labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-app":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"},"managedFields":[{"manager":"Swagger-Codegen","operation":"Update","apiVersion":"v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:name":{},"f:tycho-app":{},"f:tycho-guid":{},"f:username":{}}},"f:spec":{"f:externalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":80,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"port-1","protocol":"TCP","port":80,"targetPort":80,"nodePort":30412}],"selector":{"name":"nginx-62d54e71784645a49bb3743c16e228e6"},"clusterIP":"10.105.67.10","type":"LoadBalancer","sessionAffinity":"None","externalTrafficPolicy":"Cluster"},"status":{"loadBalancer":{}}}]}

INFO:tycho.kube:-================================> *** nginx-62d54e71784645a49bb3743c16e228e6
DEBUG:tycho.kube:service nginx-62d54e71784645a49bb3743c16e228e6 ingress ip: 127.0.0.1
INFO:werkzeug:127.0.0.1 - - [15/Jun/2020 11:43:30] "POST /system/status HTTP/1.1" 200 -
cannot get namespace from file: [Errno 2] No such file or directory: '/var/run/secrets/kubernetes.io/serviceaccount/namespace'
-- delete: {
  "name": "url:"
}
DEBUG:__main__:delete-request: {
  "name": "url:"
}
DEBUG:flask.app:--:Validating obj {
  "name": "url:"
}
DEBUG:flask.app:  schema: {
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "example": "test-app",
      "description": "Identifier of system to delete"
    }
  }
}
DEBUG:kubernetes.client.rest:response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"unable to parse requirement: invalid label value: \"url:\": at key: \"tycho-guid\": a valid label must be an empty string or consist of alphanumeric characters, '-', '_' or '.', and must start and end with an alphanumeric character (e.g. 'MyValue',  or 'my_value',  or '12345', regex used for validation is '(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?')","reason":"BadRequest","code":400}

Traceback (most recent call last):
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/tycho/kube.py", line 352, in delete
    namespace=namespace)
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/lib/python3.7/site-packages/kubernetes/client/apis/core_v1_api.py", line 13174, in list_namespaced_service
    (data) = self.list_namespaced_service_with_http_info(namespace, **kwargs)
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/lib/python3.7/site-packages/kubernetes/client/apis/core_v1_api.py", line 13277, in list_namespaced_service_with_http_info
    collection_formats=collection_formats)
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/lib/python3.7/site-packages/kubernetes/client/api_client.py", line 321, in call_api
    _return_http_data_only, collection_formats, _preload_content, _request_timeout)
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/lib/python3.7/site-packages/kubernetes/client/api_client.py", line 155, in __call_api
    _request_timeout=_request_timeout)
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/lib/python3.7/site-packages/kubernetes/client/api_client.py", line 342, in request
    headers=headers)
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/lib/python3.7/site-packages/kubernetes/client/rest.py", line 231, in GET
    query_params=query_params)
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/lib/python3.7/site-packages/kubernetes/client/rest.py", line 222, in request
    raise ApiException(http_resp=r)
kubernetes.client.rest.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Mon, 15 Jun 2020 15:43:31 GMT', 'Content-Length': '468'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"unable to parse requirement: invalid label value: \"url:\": at key: \"tycho-guid\": a valid label must be an empty string or consist of alphanumeric characters, '-', '_' or '.', and must start and end with an alphanumeric character (e.g. 'MyValue',  or 'my_value',  or '12345', regex used for validation is '(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?')","reason":"BadRequest","code":400}



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/tycho/api.py", line 193, in post
    result=tycho().get_compute().delete (system_name),
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/tycho/kube.py", line 401, in delete
    traceback.print_exc (e)
  File "/opt/python37/lib/python3.7/traceback.py", line 163, in print_exc
    print_exception(*sys.exc_info(), limit=limit, file=file, chain=chain)
  File "/opt/python37/lib/python3.7/traceback.py", line 104, in print_exception
    type(value), value, tb, limit=limit).format(chain=chain):
  File "/opt/python37/lib/python3.7/traceback.py", line 508, in __init__
    capture_locals=capture_locals)
  File "/opt/python37/lib/python3.7/traceback.py", line 337, in extract
    if limit >= 0:
TypeError: '>=' not supported between instances of 'ApiException' and 'int'
INFO:werkzeug:127.0.0.1 - - [15/Jun/2020 11:43:31] "POST /system/delete HTTP/1.1" 200 -
-- delete: {
  "name": "http:--localhost:5000"
}
DEBUG:__main__:delete-request: {
  "name": "http:--localhost:5000"
}
DEBUG:flask.app:--:Validating obj {
  "name": "http:--localhost:5000"
}
DEBUG:flask.app:  schema: {
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "example": "test-app",
      "description": "Identifier of system to delete"
    }
  }
}
DEBUG:kubernetes.client.rest:response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"unable to parse requirement: invalid label value: \"http:--localhost:5000\": at key: \"tycho-guid\": a valid label must be an empty string or consist of alphanumeric characters, '-', '_' or '.', and must start and end with an alphanumeric character (e.g. 'MyValue',  or 'my_value',  or '12345', regex used for validation is '(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?')","reason":"BadRequest","code":400}

Traceback (most recent call last):
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/tycho/kube.py", line 352, in delete
    namespace=namespace)
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/lib/python3.7/site-packages/kubernetes/client/apis/core_v1_api.py", line 13174, in list_namespaced_service
    (data) = self.list_namespaced_service_with_http_info(namespace, **kwargs)
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/lib/python3.7/site-packages/kubernetes/client/apis/core_v1_api.py", line 13277, in list_namespaced_service_with_http_info
    collection_formats=collection_formats)
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/lib/python3.7/site-packages/kubernetes/client/api_client.py", line 321, in call_api
    _return_http_data_only, collection_formats, _preload_content, _request_timeout)
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/lib/python3.7/site-packages/kubernetes/client/api_client.py", line 155, in __call_api
    _request_timeout=_request_timeout)
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/lib/python3.7/site-packages/kubernetes/client/api_client.py", line 342, in request
    headers=headers)
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/lib/python3.7/site-packages/kubernetes/client/rest.py", line 231, in GET
    query_params=query_params)
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/venv/lib/python3.7/site-packages/kubernetes/client/rest.py", line 222, in request
    raise ApiException(http_resp=r)
kubernetes.client.rest.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Mon, 15 Jun 2020 15:43:31 GMT', 'Content-Length': '485'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"unable to parse requirement: invalid label value: \"http:--localhost:5000\": at key: \"tycho-guid\": a valid label must be an empty string or consist of alphanumeric characters, '-', '_' or '.', and must start and end with an alphanumeric character (e.g. 'MyValue',  or 'my_value',  or '12345', regex used for validation is '(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?')","reason":"BadRequest","code":400}



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/tycho/api.py", line 193, in post
    result=tycho().get_compute().delete (system_name),
  File "/var/lib/jenkins/jobs/tycho/workspace/tycho/tycho/kube.py", line 401, in delete
    traceback.print_exc (e)
  File "/opt/python37/lib/python3.7/traceback.py", line 163, in print_exc
    print_exception(*sys.exc_info(), limit=limit, file=file, chain=chain)
  File "/opt/python37/lib/python3.7/traceback.py", line 104, in print_exception
    type(value), value, tb, limit=limit).format(chain=chain):
  File "/opt/python37/lib/python3.7/traceback.py", line 508, in __init__
    capture_locals=capture_locals)
  File "/opt/python37/lib/python3.7/traceback.py", line 337, in extract
    if limit >= 0:
TypeError: '>=' not supported between instances of 'ApiException' and 'int'
INFO:werkzeug:127.0.0.1 - - [15/Jun/2020 11:43:31] "POST /system/delete HTTP/1.1" 200 -
-- delete: {
  "name": "62d54e71784645a49bb3743c16e228e6"
}
DEBUG:__main__:delete-request: {
  "name": "62d54e71784645a49bb3743c16e228e6"
}
DEBUG:flask.app:--:Validating obj {
  "name": "62d54e71784645a49bb3743c16e228e6"
}
DEBUG:flask.app:  schema: {
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "example": "test-app",
      "description": "Identifier of system to delete"
    }
  }
}
DEBUG:kubernetes.client.rest:response body: {"kind":"ServiceList","apiVersion":"v1","metadata":{"selfLink":"/api/v1/namespaces/default/services","resourceVersion":"928098"},"items":[{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","namespace":"default","selfLink":"/api/v1/namespaces/default/services/nginx-62d54e71784645a49bb3743c16e228e6","uid":"d19e1579-07a2-4fdd-b386-a973ccd17be6","resourceVersion":"928059","creationTimestamp":"2020-06-15T15:43:18Z","labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-app":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"},"managedFields":[{"manager":"Swagger-Codegen","operation":"Update","apiVersion":"v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:name":{},"f:tycho-app":{},"f:tycho-guid":{},"f:username":{}}},"f:spec":{"f:externalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":80,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"port-1","protocol":"TCP","port":80,"targetPort":80,"nodePort":30412}],"selector":{"name":"nginx-62d54e71784645a49bb3743c16e228e6"},"clusterIP":"10.105.67.10","type":"LoadBalancer","sessionAffinity":"None","externalTrafficPolicy":"Cluster"},"status":{"loadBalancer":{}}}]}

DEBUG:tycho.kube: --deleting service 62d54e71784645a49bb3743c16e228e6 in namespace default
DEBUG:kubernetes.client.rest:response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Success","details":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","kind":"services","uid":"d19e1579-07a2-4fdd-b386-a973ccd17be6"}}

DEBUG:tycho.kube: --deleting deployment elements of 62d54e71784645a49bb3743c16e228e6 in namespace default
DEBUG:kubernetes.client.rest:response body: {"kind":"DeploymentList","apiVersion":"apps/v1","metadata":{"selfLink":"/apis/apps/v1/namespaces/default/deployments","resourceVersion":"928102"},"items":[{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/deployments/nginx-62d54e71784645a49bb3743c16e228e6","uid":"4521042b-3da7-4ee6-9465-f429bfc712fe","resourceVersion":"928090","generation":1,"creationTimestamp":"2020-06-15T15:43:18Z","labels":{"executor":"tycho","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"},"annotations":{"deployment.kubernetes.io/revision":"1"},"managedFields":[{"manager":"Swagger-Codegen","operation":"Update","apiVersion":"apps/v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:tycho-guid":{},"f:username":{}}},"f:spec":{"f:progressDeadlineSeconds":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:tycho-guid":{},"f:username":{}}},"f:strategy":{"f:rollingUpdate":{".":{},"f:maxSurge":{},"f:maxUnavailable":{}},"f:type":{}},"f:template":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:name":{},"f:tycho-app-id":{},"f:tycho-guid":{},"f:username":{}},"f:name":{}},"f:spec":{"f:containers":{"k:{\"name\":\"nginx\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"GUID\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NB_PREFIX\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2020-06-15T15:43:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:deployment.kubernetes.io/revision":{}}},"f:status":{"f:availableReplicas":{},"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Progressing\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updatedReplicas":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"}},"template":{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","creationTimestamp":null,"labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","tycho-app-id":"","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"}},"spec":{"containers":[{"name":"nginx","image":"nginx:stable-alpine","env":[{"name":"GUID","value":"62d54e71784645a49bb3743c16e228e6"},{"name":"NB_PREFIX","value":"/"}],"resources":{"limits":{"cpu":"10m","memory":"50M"},"requests":{"cpu":"10m","memory":"20M"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{},"schedulerName":"default-scheduler"}},"strategy":{"type":"RollingUpdate","rollingUpdate":{"maxUnavailable":"25%","maxSurge":"25%"}},"revisionHistoryLimit":10,"progressDeadlineSeconds":600},"status":{"observedGeneration":1,"replicas":1,"updatedReplicas":1,"readyReplicas":1,"availableReplicas":1,"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-06-15T15:43:27Z","lastTransitionTime":"2020-06-15T15:43:27Z","reason":"MinimumReplicasAvailable","message":"Deployment has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-06-15T15:43:27Z","lastTransitionTime":"2020-06-15T15:43:18Z","reason":"NewReplicaSetAvailable","message":"ReplicaSet \"nginx-62d54e71784645a49bb3743c16e228e6-5586499dff\" has successfully progressed."}]}}]}

DEBUG:tycho.kube: --deleting replica_set elements of 62d54e71784645a49bb3743c16e228e6 in namespace default
DEBUG:kubernetes.client.rest:response body: {"kind":"ReplicaSetList","apiVersion":"apps/v1","metadata":{"selfLink":"/apis/apps/v1/namespaces/default/replicasets","resourceVersion":"928103"},"items":[{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6-5586499dff","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/replicasets/nginx-62d54e71784645a49bb3743c16e228e6-5586499dff","uid":"5d7a5a02-ee38-470d-be39-4b7b50af090a","resourceVersion":"928089","generation":1,"creationTimestamp":"2020-06-15T15:43:18Z","labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","pod-template-hash":"5586499dff","tycho-app-id":"","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"},"annotations":{"deployment.kubernetes.io/desired-replicas":"1","deployment.kubernetes.io/max-replicas":"2","deployment.kubernetes.io/revision":"1"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"Deployment","name":"nginx-62d54e71784645a49bb3743c16e228e6","uid":"4521042b-3da7-4ee6-9465-f429bfc712fe","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2020-06-15T15:43:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:deployment.kubernetes.io/desired-replicas":{},"f:deployment.kubernetes.io/max-replicas":{},"f:deployment.kubernetes.io/revision":{}},"f:labels":{".":{},"f:executor":{},"f:name":{},"f:pod-template-hash":{},"f:tycho-app-id":{},"f:tycho-guid":{},"f:username":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"4521042b-3da7-4ee6-9465-f429bfc712fe\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:replicas":{},"f:selector":{"f:matchLabels":{".":{},"f:pod-template-hash":{},"f:tycho-guid":{},"f:username":{}}},"f:template":{"f:metadata":{"f:labels":{".":{},"f:executor":{},"f:name":{},"f:pod-template-hash":{},"f:tycho-app-id":{},"f:tycho-guid":{},"f:username":{}},"f:name":{}},"f:spec":{"f:containers":{"k:{\"name\":\"nginx\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"GUID\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NB_PREFIX\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}},"f:status":{"f:availableReplicas":{},"f:fullyLabeledReplicas":{},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"pod-template-hash":"5586499dff","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"}},"template":{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6","creationTimestamp":null,"labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","pod-template-hash":"5586499dff","tycho-app-id":"","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"}},"spec":{"containers":[{"name":"nginx","image":"nginx:stable-alpine","env":[{"name":"GUID","value":"62d54e71784645a49bb3743c16e228e6"},{"name":"NB_PREFIX","value":"/"}],"resources":{"limits":{"cpu":"10m","memory":"50M"},"requests":{"cpu":"10m","memory":"20M"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"replicas":1,"fullyLabeledReplicas":1,"readyReplicas":1,"availableReplicas":1,"observedGeneration":1}}]}

DEBUG:tycho.kube: --deleting pod elements of 62d54e71784645a49bb3743c16e228e6 in namespace default
DEBUG:kubernetes.client.rest:response body: {"kind":"PodList","apiVersion":"v1","metadata":{"selfLink":"/api/v1/namespaces/default/pods","resourceVersion":"928104"},"items":[{"metadata":{"name":"nginx-62d54e71784645a49bb3743c16e228e6-5586499dff-rfmpt","generateName":"nginx-62d54e71784645a49bb3743c16e228e6-5586499dff-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/nginx-62d54e71784645a49bb3743c16e228e6-5586499dff-rfmpt","uid":"025653ad-5676-4c36-883e-32f86e1356d6","resourceVersion":"928086","creationTimestamp":"2020-06-15T15:43:18Z","labels":{"executor":"tycho","name":"nginx-62d54e71784645a49bb3743c16e228e6","pod-template-hash":"5586499dff","tycho-app-id":"","tycho-guid":"62d54e71784645a49bb3743c16e228e6","username":"admin"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"ReplicaSet","name":"nginx-62d54e71784645a49bb3743c16e228e6-5586499dff","uid":"5d7a5a02-ee38-470d-be39-4b7b50af090a","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2020-06-15T15:43:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:generateName":{},"f:labels":{".":{},"f:executor":{},"f:name":{},"f:pod-template-hash":{},"f:tycho-app-id":{},"f:tycho-guid":{},"f:username":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5d7a5a02-ee38-470d-be39-4b7b50af090a\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:containers":{"k:{\"name\":\"nginx\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"GUID\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NB_PREFIX\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2020-06-15T15:43:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.17.0.4\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"default-token-md6pm","secret":{"secretName":"default-token-md6pm","defaultMode":420}}],"containers":[{"name":"nginx","image":"nginx:stable-alpine","env":[{"name":"GUID","value":"62d54e71784645a49bb3743c16e228e6"},{"name":"NB_PREFIX","value":"/"}],"resources":{"limits":{"cpu":"10m","memory":"50M"},"requests":{"cpu":"10m","memory":"20M"}},"volumeMounts":[{"name":"default-token-md6pm","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"stars-c0.edc.renci.org","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2020-06-15T15:43:18Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2020-06-15T15:43:27Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2020-06-15T15:43:27Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2020-06-15T15:43:18Z"}],"hostIP":"172.25.8.116","podIP":"172.17.0.4","podIPs":[{"ip":"172.17.0.4"}],"startTime":"2020-06-15T15:43:18Z","containerStatuses":[{"name":"nginx","state":{"running":{"startedAt":"2020-06-15T15:43:26Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"nginx:stable-alpine","imageID":"docker-pullable://nginx@sha256:2668e65e1a36a749aa8b3a5297eee45504a4efea423ec2affcbbf85e31a9a571","containerID":"docker://da0a033df0824581f93c13ff14aa1adf2ba0d5d1d73bca47c431ee500b55bd97","started":true}],"qosClass":"Burstable"}}]}

DEBUG:tycho.kube: --deleting persistentvolumeclaim elements of 62d54e71784645a49bb3743c16e228e6 in namespace default
DEBUG:kubernetes.client.rest:response body: {"kind":"PersistentVolumeClaimList","apiVersion":"v1","metadata":{"selfLink":"/api/v1/namespaces/default/persistentvolumeclaims","resourceVersion":"928105"},"items":[]}

INFO:werkzeug:127.0.0.1 - - [15/Jun/2020 11:43:31] "POST /system/delete HTTP/1.1" 200 -
url: http://localhost:5000
-- delete: {
  "name": "url:"
}
{
  "status": "error",
  "result": {
    "error": "'>=' not supported between instances of 'ApiException' and 'int'"
  },
  "message": "'>=' not supported between instances of 'ApiException' and 'int'"
}
-- delete: {
  "name": "http:--localhost:5000"
}
{
  "status": "error",
  "result": {
    "error": "'>=' not supported between instances of 'ApiException' and 'int'"
  },
  "message": "'>=' not supported between instances of 'ApiException' and 'int'"
}
-- delete: {
  "name": "62d54e71784645a49bb3743c16e228e6"
}
62d54e71784645a49bb3743c16e228e6
--status...
cannot get namespace from file: [Errno 2] No such file or directory: '/var/run/secrets/kubernetes.io/serviceaccount/namespace'
DEBUG:root:list-request: {
  "username": "admin"
}
DEBUG:flask.app:--:Validating obj {
  "username": "admin"
}
DEBUG:flask.app:  schema: {
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "example": "test-app",
      "nullable": true,
      "description": "Identifier of system to list"
    }
  }
}
DEBUG:tycho.kube:-- status label: username=admin
DEBUG:kubernetes.client.rest:response body: {"kind":"DeploymentList","apiVersion":"apps/v1","metadata":{"selfLink":"/apis/apps/v1/namespaces/default/deployments","resourceVersion":"928111"},"items":[]}

INFO:werkzeug:127.0.0.1 - - [15/Jun/2020 11:43:32] "POST /system/status HTTP/1.1" 200 -
url: http://localhost:5000
None running
+ '[' 0 -ne 0 ']'
Process leaked file descriptors. See https://jenkins.io/redirect/troubleshooting/process-leaked-file-descriptors for more information

{
  "status": "success",
  "result": [
    {
      "name": "nginx-62d54e71784645a49bb3743c16e228e6",
      "app_id": "nginx-62d54e71784645a49bb3743c16e228e6",
      "sid": "62d54e71784645a49bb3743c16e228e6",
      "ip_address": "127.0.0.1",
      "port": "30412",
      "creation_time": "6-15-2020 15:43:18",
      "utilization": {
        "nginx": {
          "cpu": "10m",
          "memory": "50M"
        }
      }
    }
  ],
  "message": "Get status for system None"
}
{
  "error": "'>=' not supported between instances of 'ApiException' and 'int'"
}
{
  "error": "'>=' not supported between instances of 'ApiException' and 'int'"
}
RESPONSE ITEMS:----------------> []
{
  "status": "success",
  "result": [],
  "message": "Get status for system None"
}
Email was triggered for: Success
Email was triggered for: Unstable (Test Failures)/Failure -> Success
Trigger Success was overridden by another trigger and will not send an email.
Sending email for trigger: Unstable (Test Failures)/Failure -> Success
Sending email to: bennettc@renci.org
Finished: SUCCESS
