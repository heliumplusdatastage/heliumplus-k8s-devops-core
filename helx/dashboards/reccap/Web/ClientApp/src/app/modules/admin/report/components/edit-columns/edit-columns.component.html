<mat-accordion cdkDropList (cdkDropListDropped)="drop($event)">
  <mat-expansion-panel *ngFor="let column of entityForm.controls; let i = index" cdkDrag>
    <mat-expansion-panel-header cdkDragHandle>
      <mat-panel-title><i class="fas fa-bars mr-1"></i>{{ column.value.name || '&lt;No column name&gt;' }}
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div [formGroup]="$any(column)">
      <mat-form-field class="col-md-6" *ngIf="column.get('name');let control">
        <input matInput placeholder="Name" [formControl]="$any(control)">
        <mat-error *ngIf="control.errors?.required;let error">Required</mat-error>
        <mat-error *ngIf="control.errors?.maxlength;let error">Cannot be more than
          {{error.requiredLength}} characters long</mat-error>
        <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
      </mat-form-field>

      <mat-form-field class="col-md-6" *ngIf="column.get('displayName');let control">
        <input matInput placeholder="Display Name" [formControl]="$any(control)">
        <mat-error *ngIf="control.errors?.maxlength;let error">Cannot be more than
          {{error.requiredLength}} characters long</mat-error>
        <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
      </mat-form-field>


      <mat-form-field class="col-md-4" *ngIf="column.get('canView');let control">
        <mat-label>Viewable</mat-label>
        <mat-select [formControl]="$any(control)">
          <mat-option [value]="true">Yes</mat-option>
          <mat-option [value]="false">No</mat-option>
        </mat-select>
        <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
      </mat-form-field>

      <mat-form-field class="col-md-4" *ngIf="column.get('canDownload');let control">
        <mat-label>Download</mat-label>
        <mat-select [formControl]="$any(control)">
          <mat-option [value]="true">Yes</mat-option>
          <mat-option [value]="false">No</mat-option>
        </mat-select>
        <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
      </mat-form-field>

      <mat-form-field class="col-md-4" *ngIf="column.get('sortName');let control">
        <input matInput placeholder="Sort name" [formControl]="$any(control)">
        <mat-error *ngIf="control.errors?.maxlength;let error">Cannot be more than
          {{error.requiredLength}} characters long</mat-error>
        <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
      </mat-form-field>

      <mat-form-field class="col-md-6" *ngIf="column.get('displayValue');let control">
        <input matInput placeholder="Display Value" [formControl]="$any(control)">
        <mat-error *ngIf="control.errors?.maxlength;let error">Cannot be more than
          {{error.requiredLength}} characters long</mat-error>
        <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
      </mat-form-field>

      <mat-form-field class="col-md-6" *ngIf="column.get('className');let control">
        <input matInput placeholder="Display Class Name" [formControl]="$any(control)">
        <mat-error *ngIf="control.errors?.maxlength;let error">Cannot be more than
          {{error.requiredLength}} characters long</mat-error>
        <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
      </mat-form-field>

      <mat-form-field class="col-md" *ngIf="column.get('contextMenu');let control">
        <textarea matInput cdkTextareaAutosize="true" cdkAutosizeMinRows="5" cdkAutosizeMaxRows="10"
          placeholder="Context Menu" [formControl]="$any(control)"></textarea>
        <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
      </mat-form-field>

    </div>
    <mat-action-row>
      <button mat-button color="warn" (click)="clickRemoveItem($event, column)"> <i class="fa fa-trash-alt"></i>
        Remove column</button>
    </mat-action-row>
  </mat-expansion-panel>
  <mat-action-row>
    <button mat-button color="primary" (click)="clickAddItem($event)"><i class="fa fa-plus"></i>
      Add column</button>
  </mat-action-row>

</mat-accordion>