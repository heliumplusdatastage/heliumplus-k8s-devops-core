<mat-accordion cdkDropList (cdkDropListDropped)="drop($event)">
    <mat-expansion-panel *ngFor="let parameter of entityForm.controls; let i = index" cdkDrag>
        <mat-expansion-panel-header cdkDragHandle>
            <mat-panel-title><i class="fas fa-bars mr-1"></i>{{ parameter.value.name || '&lt;No parameter name&gt;' }}
            </mat-panel-title>
        </mat-expansion-panel-header>
        <div [formGroup]="$any(parameter)">
            <mat-form-field class="col-md-6" *ngIf="parameter.get('name');let control">
                <input matInput placeholder="Name" [formControl]="$any(control)">
                <mat-error *ngIf="control.errors?.required;let error">Required</mat-error>
                <mat-error *ngIf="control.errors?.maxlength;let error">Cannot be more than
                    {{error.requiredLength}} characters long</mat-error>
                <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
            </mat-form-field>

            <mat-form-field class="col-md-6" *ngIf="parameter.get('displayName');let control">
                <input matInput placeholder="Display Name" [formControl]="$any(control)">
                <mat-error *ngIf="control.errors?.required;let error">Required</mat-error>
                <mat-error *ngIf="control.errors?.maxlength;let error">Cannot be more than
                    {{error.requiredLength}} characters long</mat-error>
                <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
            </mat-form-field>


            <mat-form-field class="col-md-4" *ngIf="parameter.get('isRequired');let control">
                <mat-label>Required</mat-label>
                <mat-select [formControl]="$any(control)">
                    <mat-option [value]="true">Yes</mat-option>
                    <mat-option [value]="false">No</mat-option>
                </mat-select>
                <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
            </mat-form-field>

            <mat-form-field class="col-md-4" *ngIf="parameter.get('isHidden');let control">
                <mat-label>Hidden</mat-label>
                <mat-select [formControl]="$any(control)">
                    <mat-option [value]="true">Yes</mat-option>
                    <mat-option [value]="false">No</mat-option>
                </mat-select>
                <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
            </mat-form-field>

            <mat-form-field class="col-md-4" *ngIf="parameter.get('defaultValue');let control">
                <input matInput placeholder="Default Value" [formControl]="$any(control)">
                <mat-error *ngIf="control.errors?.maxlength;let error">Cannot be more than
                    {{error.requiredLength}} characters long</mat-error>
                <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
            </mat-form-field>

            <mat-form-field class="col-md-6" *ngIf="parameter.get('parameterDataType');let control">
                <input matInput placeholder="Parameter Type" [formControl]="$any(control)">
                <mat-select [formControl]="$any(control)">
                    <mat-option *enums="'ReportParameterDataType';let value" [value]="value.id">
                        {{value.text}}</mat-option>
                </mat-select>
                <mat-error *ngIf="control.errors?.required;let error">Required</mat-error>
                <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
            </mat-form-field>

            <mat-form-field class="col-md-6" *ngIf="parameter.get('hintText');let control">
                <input matInput placeholder="Hint Text" [formControl]="$any(control)">
                <mat-error *ngIf="control.errors?.maxlength;let error">Cannot be more than
                    {{error.requiredLength}} characters long</mat-error>
                <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
            </mat-form-field>

            <mat-form-field class="col-md" *ngIf="parameter.get('customData');let control">
                <textarea matInput cdkTextareaAutosize="true" cdkAutosizeMinRows="5" cdkAutosizeMaxRows="10"
                    placeholder="Custom Data" [formControl]="$any(control)"></textarea>
                <mat-error *ngIf="control.errors?.maxlength;let error">Cannot be more than
                    {{error.requiredLength}} characters long</mat-error>
                <mat-error *ngFor="let error of control.errors?.serverError;">{{error}}</mat-error>
            </mat-form-field>

        </div>
        <mat-action-row>
            <button mat-button color="warn" (click)="clickRemoveItem($event, parameter)"> <i
                    class="fa fa-trash-alt"></i>
                Remove parameter</button>
        </mat-action-row>
    </mat-expansion-panel>
    <mat-action-row>
        <button mat-button color="primary" (click)="clickAddItem($event)"><i class="fa fa-plus"></i>
            Add parameter</button>
    </mat-action-row>

</mat-accordion>